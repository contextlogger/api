<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ContextLogger2 Logger Daemon Internals: pcache.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_53e7feede50ae4cb655a635f658a2b4e.html">sqlite3h</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a0c08fff43b69094a2511677d8587129.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_05c6b5177aad09a72e8ee1adc608dac0.html">sqlite3</a>
  </div>
</div>
<div class="contents">
<h1>pcache.h</h1><a href="pcache_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">** 2008 August 05</span>
<a name="l00003"></a>00003 <span class="comment">**</span>
<a name="l00004"></a>00004 <span class="comment">** The author disclaims copyright to this source code.  In place of</span>
<a name="l00005"></a>00005 <span class="comment">** a legal notice, here is a blessing:</span>
<a name="l00006"></a>00006 <span class="comment">**</span>
<a name="l00007"></a>00007 <span class="comment">**    May you do good and not evil.</span>
<a name="l00008"></a>00008 <span class="comment">**    May you find forgiveness for yourself and forgive others.</span>
<a name="l00009"></a>00009 <span class="comment">**    May you share freely, never taking more than you give.</span>
<a name="l00010"></a>00010 <span class="comment">**</span>
<a name="l00011"></a>00011 <span class="comment">*************************************************************************</span>
<a name="l00012"></a>00012 <span class="comment">** This header file defines the interface that the sqlite page cache</span>
<a name="l00013"></a>00013 <span class="comment">** subsystem. </span>
<a name="l00014"></a>00014 <span class="comment">**</span>
<a name="l00015"></a>00015 <span class="comment">** @(#) $Id: pcache.h,v 1.14 2008/10/17 18:51:53 danielk1977 Exp $</span>
<a name="l00016"></a>00016 <span class="comment">*/</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef _PCACHE_H_</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a><a class="code" href="pcache_8h.html#a65ced2fb250bad8b3a1052e42b6dc965">00020</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structPgHdr.html">PgHdr</a> <a class="code" href="structPgHdr.html">PgHdr</a>;
<a name="l00021"></a><a class="code" href="pcache_8h.html#a0fc363bdad11640b78592e1847ec0970">00021</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structPCache.html">PCache</a> <a class="code" href="structPCache.html">PCache</a>;
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="comment">/*</span>
<a name="l00024"></a>00024 <span class="comment">** Every page in the cache is controlled by an instance of the following</span>
<a name="l00025"></a>00025 <span class="comment">** structure.</span>
<a name="l00026"></a>00026 <span class="comment">*/</span>
<a name="l00027"></a><a class="code" href="structPgHdr.html">00027</a> <span class="keyword">struct </span><a class="code" href="structPgHdr.html">PgHdr</a> {
<a name="l00028"></a><a class="code" href="structPgHdr.html#a0f9f2ac8492c0cdad5898036db20b798">00028</a>   <span class="keywordtype">void</span> *<a class="code" href="structPgHdr.html#a0f9f2ac8492c0cdad5898036db20b798">pData</a>;                   <span class="comment">/* Content of this page */</span>
<a name="l00029"></a><a class="code" href="structPgHdr.html#a8ff7430ed04077f1ae20d10801968164">00029</a>   <span class="keywordtype">void</span> *<a class="code" href="structPgHdr.html#a8ff7430ed04077f1ae20d10801968164">pExtra</a>;                  <span class="comment">/* Extra content */</span>
<a name="l00030"></a><a class="code" href="structPgHdr.html#a7732b1c0f19d9555ac93d4879fc95bbd">00030</a>   <a class="code" href="structPgHdr.html">PgHdr</a> *<a class="code" href="structPgHdr.html#a7732b1c0f19d9555ac93d4879fc95bbd">pDirty</a>;                 <span class="comment">/* Transient list of dirty pages */</span>
<a name="l00031"></a><a class="code" href="structPgHdr.html#ab6e2223e410acf9bae7f12f1b1293589">00031</a>   <a class="code" href="pager_8h.html#aec0c653e8dd16e4639caf2f8ea54f55c">Pgno</a> <a class="code" href="structPgHdr.html#ab6e2223e410acf9bae7f12f1b1293589">pgno</a>;                     <span class="comment">/* Page number for this page */</span>
<a name="l00032"></a><a class="code" href="structPgHdr.html#aaa4879a9510c8a819a1e10a8ee21495b">00032</a>   <a class="code" href="structPager.html">Pager</a> *<a class="code" href="structPgHdr.html#aaa4879a9510c8a819a1e10a8ee21495b">pPager</a>;                 <span class="comment">/* The pager this page is part of */</span>
<a name="l00033"></a>00033 <span class="preprocessor">#ifdef SQLITE_CHECK_PAGES</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>  <a class="code" href="sqliteInt_8h.html#a03ad5adfaeb9b7640dde78a0cc390319">u32</a> pageHash;                  <span class="comment">/* Hash of page content */</span>
<a name="l00035"></a>00035 <span class="preprocessor">#endif</span>
<a name="l00036"></a><a class="code" href="structPgHdr.html#a8ef58380f7e04f1e3c76fa208e227f95">00036</a> <span class="preprocessor"></span>  <a class="code" href="sqliteInt_8h.html#a20f2299e322dcbde37cb07b16910b843">u16</a> <a class="code" href="structPgHdr.html#a8ef58380f7e04f1e3c76fa208e227f95">flags</a>;                     <span class="comment">/* PGHDR flags defined below */</span>
<a name="l00037"></a>00037   <span class="comment">/**********************************************************************</span>
<a name="l00038"></a>00038 <span class="comment">  ** Elements above are public.  All that follows is private to pcache.c</span>
<a name="l00039"></a>00039 <span class="comment">  ** and should not be accessed by other modules.</span>
<a name="l00040"></a>00040 <span class="comment">  */</span>
<a name="l00041"></a><a class="code" href="structPgHdr.html#ac68c685d117788c18849e8853dd419d5">00041</a>   <a class="code" href="sqliteInt_8h.html#a7b32340f65cd15f029caad258fb3355c">i16</a> <a class="code" href="structPgHdr.html#ac68c685d117788c18849e8853dd419d5">nRef</a>;                      <span class="comment">/* Number of users of this page */</span>
<a name="l00042"></a><a class="code" href="structPgHdr.html#a557aeaddd1b0805815ce06f1bfd27782">00042</a>   <a class="code" href="structPCache.html">PCache</a> *<a class="code" href="structPgHdr.html#a557aeaddd1b0805815ce06f1bfd27782">pCache</a>;                <span class="comment">/* Cache that owns this page */</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   <span class="comment">/**********************************************************************</span>
<a name="l00045"></a>00045 <span class="comment">  ** Elements above are accessible at any time by the owner of the cache</span>
<a name="l00046"></a>00046 <span class="comment">  ** without the need for a mutex.  The elements that follow can only be</span>
<a name="l00047"></a>00047 <span class="comment">  ** accessed while holding the SQLITE_MUTEX_STATIC_LRU mutex.</span>
<a name="l00048"></a>00048 <span class="comment">  */</span>
<a name="l00049"></a><a class="code" href="structPgHdr.html#acd6dd17d03aab05dd5bf4706fcc26496">00049</a>   <a class="code" href="structPgHdr.html">PgHdr</a> *<a class="code" href="structPgHdr.html#a239f48e02f58922cb183acf131737b90">pNextHash</a>, *<a class="code" href="structPgHdr.html#acd6dd17d03aab05dd5bf4706fcc26496">pPrevHash</a>;  <span class="comment">/* Hash collision chain for PgHdr.pgno */</span>
<a name="l00050"></a><a class="code" href="structPgHdr.html#a28d69a6bb992bb683da72d8574d8d6cc">00050</a>   <a class="code" href="structPgHdr.html">PgHdr</a> *<a class="code" href="structPgHdr.html#ad2714a1e5f907b0ba87b22370fc8a3a5">pNext</a>, *<a class="code" href="structPgHdr.html#a28d69a6bb992bb683da72d8574d8d6cc">pPrev</a>;          <span class="comment">/* List of clean or dirty pages */</span>
<a name="l00051"></a><a class="code" href="structPgHdr.html#a40affc3333cab8087ee1a6da2ec7b701">00051</a>   <a class="code" href="structPgHdr.html">PgHdr</a> *<a class="code" href="structPgHdr.html#a2b055223a2efbe1cee9ba145a10d3679">pNextLru</a>, *<a class="code" href="structPgHdr.html#a40affc3333cab8087ee1a6da2ec7b701">pPrevLru</a>;    <span class="comment">/* Part of global LRU list */</span>
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/* Bit values for PgHdr.flags */</span>
<a name="l00055"></a><a class="code" href="pcache_8h.html#a7834f508aa444e147597afe8b6d8991e">00055</a> <span class="preprocessor">#define PGHDR_IN_JOURNAL        0x001  </span><span class="comment">/* Page is in rollback journal */</span>
<a name="l00056"></a><a class="code" href="pcache_8h.html#a2b0dee27357c4d50e1d7a5394e33558a">00056</a> <span class="preprocessor">#define PGHDR_DIRTY             0x002  </span><span class="comment">/* Page has changed */</span>
<a name="l00057"></a><a class="code" href="pcache_8h.html#a4e5fc673af21b52ab75bd04896fd1cb7">00057</a> <span class="preprocessor">#define PGHDR_NEED_SYNC         0x004  </span><span class="comment">/* Fsync the rollback journal before</span>
<a name="l00058"></a>00058 <span class="comment">                                       ** writing this page to the database */</span>
<a name="l00059"></a><a class="code" href="pcache_8h.html#afb61e4b3add8013619f33dbad17a7b2a">00059</a> <span class="preprocessor">#define PGHDR_NEED_READ         0x008  </span><span class="comment">/* Content is unread */</span>
<a name="l00060"></a><a class="code" href="pcache_8h.html#a2686b6b5546f1a95a2669c8ea9efcce3">00060</a> <span class="preprocessor">#define PGHDR_REUSE_UNLIKELY    0x010  </span><span class="comment">/* A hint that reuse is unlikely */</span>
<a name="l00061"></a><a class="code" href="pcache_8h.html#ab951a895ced5be585242a1b40545f8ad">00061</a> <span class="preprocessor">#define PGHDR_DONT_WRITE        0x020  </span><span class="comment">/* Do not write content to disk */</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">/* Initialize and shutdown the page cache subsystem */</span>
<a name="l00064"></a>00064 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a1b1f5552e6517fac7c4c075aa7e60962">sqlite3PcacheInitialize</a>(<span class="keywordtype">void</span>);
<a name="l00065"></a>00065 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a5d12f054d822d727d237c7e2325e2950">sqlite3PcacheShutdown</a>(<span class="keywordtype">void</span>);
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="comment">/* Page cache buffer management:</span>
<a name="l00068"></a>00068 <span class="comment">** These routines implement SQLITE_CONFIG_PAGECACHE.</span>
<a name="l00069"></a>00069 <span class="comment">*/</span>
<a name="l00070"></a>00070 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a48284565c1bf6a5f91d56dd433dc5ed0">sqlite3PCacheBufferSetup</a>(<span class="keywordtype">void</span> *, <span class="keywordtype">int</span> sz, <span class="keywordtype">int</span> n);
<a name="l00071"></a>00071 <span class="keywordtype">void</span> *<a class="code" href="pcache_8h.html#a40e60885fd6cf62e217279f0baa37036">sqlite3PCacheMalloc</a>(<span class="keywordtype">int</span> sz);
<a name="l00072"></a>00072 <span class="keywordtype">void</span> <a class="code" href="pcache_8h.html#a17d1d52c607110743a4058b7c4bd105f">sqlite3PCacheFree</a>(<span class="keywordtype">void</span>*);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">/* Create a new pager cache.</span>
<a name="l00075"></a>00075 <span class="comment">** Under memory stress, invoke xStress to try to make pages clean.</span>
<a name="l00076"></a>00076 <span class="comment">** Only clean and unpinned pages can be reclaimed.</span>
<a name="l00077"></a>00077 <span class="comment">*/</span>
<a name="l00078"></a>00078 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a0ab92a4bc07de310c15f3e6e9517f51e">sqlite3PcacheOpen</a>(
<a name="l00079"></a>00079   <span class="keywordtype">int</span> szPage,                    <span class="comment">/* Size of every page */</span>
<a name="l00080"></a>00080   <span class="keywordtype">int</span> szExtra,                   <span class="comment">/* Extra space associated with each page */</span>
<a name="l00081"></a>00081   <span class="keywordtype">int</span> bPurgeable,                <span class="comment">/* True if pages are on backing store */</span>
<a name="l00082"></a>00082   <span class="keywordtype">int</span> (*xStress)(<span class="keywordtype">void</span>*, <a class="code" href="structPgHdr.html">PgHdr</a>*), <span class="comment">/* Call to try to make pages clean */</span>
<a name="l00083"></a>00083   <span class="keywordtype">void</span> *pStress,                 <span class="comment">/* Argument to xStress */</span>
<a name="l00084"></a>00084   <a class="code" href="structPCache.html">PCache</a> *pToInit                <span class="comment">/* Preallocated space for the PCache */</span>
<a name="l00085"></a>00085 );
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">/* Modify the page-size after the cache has been created. */</span>
<a name="l00088"></a>00088 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a6e0d2167ed324d98753d8c4fa0a331fd">sqlite3PcacheSetPageSize</a>(<a class="code" href="structPCache.html">PCache</a> *, <span class="keywordtype">int</span>);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* Return the size in bytes of a PCache object.  Used to preallocate</span>
<a name="l00091"></a>00091 <span class="comment">** storage space.</span>
<a name="l00092"></a>00092 <span class="comment">*/</span>
<a name="l00093"></a>00093 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a05ce7f9695041454c8f3bb10d82f980c">sqlite3PcacheSize</a>(<span class="keywordtype">void</span>);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="comment">/* One release per successful fetch.  Page is pinned until released.</span>
<a name="l00096"></a>00096 <span class="comment">** Reference counted. </span>
<a name="l00097"></a>00097 <span class="comment">*/</span>
<a name="l00098"></a>00098 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#aabebc6d571d61f18342356be78f321b3">sqlite3PcacheFetch</a>(<a class="code" href="structPCache.html">PCache</a>*, <a class="code" href="pager_8h.html#aec0c653e8dd16e4639caf2f8ea54f55c">Pgno</a>, <span class="keywordtype">int</span> createFlag, <a class="code" href="structPgHdr.html">PgHdr</a>**);
<a name="l00099"></a>00099 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a4cb896592e33f11f6693f4e1dd702309">sqlite3PcacheRelease</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a60fd9eee8fc3bacdac365af93f7c486f">sqlite3PcacheDrop</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);         <span class="comment">/* Remove page from cache */</span>
<a name="l00102"></a>00102 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#ab52a26ec10ee9ea85b568861b7c51f0c">sqlite3PcacheMakeDirty</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);    <span class="comment">/* Make sure page is marked dirty */</span>
<a name="l00103"></a>00103 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a392f6f70747ea00cb6d69b3810731028">sqlite3PcacheMakeClean</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);    <span class="comment">/* Mark a single page as clean */</span>
<a name="l00104"></a>00104 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a1e52478586b436c82d39f5b135d4452a">sqlite3PcacheCleanAll</a>(<a class="code" href="structPCache.html">PCache</a>*);    <span class="comment">/* Mark all dirty list pages as clean */</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">/* Change a page number.  Used by incr-vacuum. */</span>
<a name="l00107"></a>00107 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#aa97e8e0556fdcac4a0d7ebdeae52994b">sqlite3PcacheMove</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*, <a class="code" href="pager_8h.html#aec0c653e8dd16e4639caf2f8ea54f55c">Pgno</a>);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="comment">/* Remove all pages with pgno&gt;x.  Reset the cache if x==0 */</span>
<a name="l00110"></a>00110 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#af4400800e4fa29ef6d4273944e332c94">sqlite3PcacheTruncate</a>(<a class="code" href="structPCache.html">PCache</a>*, <a class="code" href="pager_8h.html#aec0c653e8dd16e4639caf2f8ea54f55c">Pgno</a> x);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">/* Get a list of all dirty pages in the cache, sorted by page number */</span>
<a name="l00113"></a>00113 <a class="code" href="structPgHdr.html">PgHdr</a> *<a class="code" href="pcache_8c.html#ac0a92eeef8064f0979ecaf582a506cdd">sqlite3PcacheDirtyList</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="comment">/* Reset and close the cache object */</span>
<a name="l00116"></a>00116 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#ab6660af184d6d004e74aa8cbb7e2e86b">sqlite3PcacheClose</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">/* Clear flags from pages of the page cache */</span>
<a name="l00119"></a>00119 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#a5d037a77975b2bbf1e440eb6e3fa456e">sqlite3PcacheClearFlags</a>(<a class="code" href="structPCache.html">PCache</a>*, <span class="keywordtype">int</span> mask);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">/* Assert flags settings on all pages.  Debugging only */</span>
<a name="l00122"></a>00122 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span>  <span class="keywordtype">void</span> <a class="code" href="pcache_8h.html#aa0a0e89e5885df77b5954b8390503c28">sqlite3PcacheAssertFlags</a>(<a class="code" href="structPCache.html">PCache</a>*, <span class="keywordtype">int</span> trueMask, <span class="keywordtype">int</span> falseMask);
<a name="l00124"></a>00124 <span class="preprocessor">#else</span>
<a name="l00125"></a><a class="code" href="pcache_8h.html#aa0a0e89e5885df77b5954b8390503c28">00125</a> <span class="preprocessor"></span><span class="preprocessor"># define sqlite3PcacheAssertFlags(A,B,C)</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>
<a name="l00128"></a>00128 <span class="comment">/* Return true if the number of dirty pages is 0 or 1 */</span>
<a name="l00129"></a>00129 <span class="keywordtype">int</span> <a class="code" href="pcache_8h.html#a8ceaf22e92bbbf84f107805064163361">sqlite3PcacheZeroOrOneDirtyPages</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">/* Discard the contents of the cache */</span>
<a name="l00132"></a>00132 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a71795ad5272d688e3d3e6a0dcba81821">sqlite3PcacheClear</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 <span class="comment">/* Return the total number of outstanding page references */</span>
<a name="l00135"></a>00135 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a5309122ea00e446c6ed304aae0c63ff6">sqlite3PcacheRefCount</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">/* Increment the reference count of an existing page */</span>
<a name="l00138"></a>00138 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#ad87805631ec9f0c218de1d0792d16f7e">sqlite3PcacheRef</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a5c45d3b563836c7926b4dc8d85f632b5">sqlite3PcachePageRefcount</a>(<a class="code" href="structPgHdr.html">PgHdr</a>*);
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/* Return the total number of pages stored in the cache */</span>
<a name="l00143"></a>00143 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#ad8ce46bdc276e0813d7717528dce1282">sqlite3PcachePagecount</a>(<a class="code" href="structPCache.html">PCache</a>*);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="preprocessor">#ifdef SQLITE_CHECK_PAGES</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span><span class="comment">/* Iterate through all pages currently stored in the cache. This interface</span>
<a name="l00147"></a>00147 <span class="comment">** is only available if SQLITE_CHECK_PAGES is defined when the library is </span>
<a name="l00148"></a>00148 <span class="comment">** built.</span>
<a name="l00149"></a>00149 <span class="comment">*/</span>
<a name="l00150"></a>00150 <span class="keywordtype">void</span> sqlite3PcacheIterate(<a class="code" href="structPCache.html">PCache</a> *pCache, <span class="keywordtype">void</span> (*xIter)(<a class="code" href="structPgHdr.html">PgHdr</a> *));
<a name="l00151"></a>00151 <span class="preprocessor">#endif</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00153"></a>00153 <span class="comment">/* Set and get the suggested cache-size for the specified pager-cache.</span>
<a name="l00154"></a>00154 <span class="comment">**</span>
<a name="l00155"></a>00155 <span class="comment">** If no global maximum is configured, then the system attempts to limit</span>
<a name="l00156"></a>00156 <span class="comment">** the total number of pages cached by purgeable pager-caches to the sum</span>
<a name="l00157"></a>00157 <span class="comment">** of the suggested cache-sizes.</span>
<a name="l00158"></a>00158 <span class="comment">*/</span>
<a name="l00159"></a>00159 <span class="keywordtype">int</span> <a class="code" href="pcache_8c.html#a61238fac4ffac858379c0c143a492e2a">sqlite3PcacheGetCachesize</a>(<a class="code" href="structPCache.html">PCache</a> *);
<a name="l00160"></a>00160 <span class="keywordtype">void</span> <a class="code" href="pcache_8c.html#aa7251d0d4879305422da65350dd21a37">sqlite3PcacheSetCachesize</a>(<a class="code" href="structPCache.html">PCache</a> *, <span class="keywordtype">int</span>);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="preprocessor">#ifdef SQLITE_ENABLE_MEMORY_MANAGEMENT</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span><span class="comment">/* Try to return memory used by the pcache module to the main memory heap */</span>
<a name="l00164"></a>00164 <span class="keywordtype">int</span> sqlite3PcacheReleaseMemory(<span class="keywordtype">int</span>);
<a name="l00165"></a>00165 <span class="preprocessor">#endif</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a>00167 <span class="preprocessor">#ifdef SQLITE_TEST</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span><span class="keywordtype">void</span> sqlite3PcacheStats(<span class="keywordtype">int</span>*,<span class="keywordtype">int</span>*,<span class="keywordtype">int</span>*,<span class="keywordtype">int</span>*);
<a name="l00169"></a>00169 <span class="preprocessor">#endif</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>
<a name="l00171"></a>00171 <span class="preprocessor">#endif </span><span class="comment">/* _PCACHE_H_ */</span>
</pre></div></div>
<hr size="1">

<p style="text-align: right;">
  <a href="http://www.contextlogger.org/">ContextLogger2</a>&#8212;ContextLogger2 Logger Daemon Internals&#8212;<small>Generated on Mon May 2 13:49:55 2011 by&nbsp;<a href="http://www.doxygen.org/">Doxygen</a> 1.6.1</small>
</p>

</body>
</html>
