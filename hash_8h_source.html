<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ContextLogger2 Logger Daemon Internals: hash.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_53e7feede50ae4cb655a635f658a2b4e.html">sqlite3h</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a0c08fff43b69094a2511677d8587129.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_05c6b5177aad09a72e8ee1adc608dac0.html">sqlite3</a>
  </div>
</div>
<div class="contents">
<h1>hash.h</h1><a href="hash_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">** 2001 September 22</span>
<a name="l00003"></a>00003 <span class="comment">**</span>
<a name="l00004"></a>00004 <span class="comment">** The author disclaims copyright to this source code.  In place of</span>
<a name="l00005"></a>00005 <span class="comment">** a legal notice, here is a blessing:</span>
<a name="l00006"></a>00006 <span class="comment">**</span>
<a name="l00007"></a>00007 <span class="comment">**    May you do good and not evil.</span>
<a name="l00008"></a>00008 <span class="comment">**    May you find forgiveness for yourself and forgive others.</span>
<a name="l00009"></a>00009 <span class="comment">**    May you share freely, never taking more than you give.</span>
<a name="l00010"></a>00010 <span class="comment">**</span>
<a name="l00011"></a>00011 <span class="comment">*************************************************************************</span>
<a name="l00012"></a>00012 <span class="comment">** This is the header file for the generic hash-table implemenation</span>
<a name="l00013"></a>00013 <span class="comment">** used in SQLite.</span>
<a name="l00014"></a>00014 <span class="comment">**</span>
<a name="l00015"></a>00015 <span class="comment">** $Id: hash.h,v 1.12 2008/10/10 17:41:29 drh Exp $</span>
<a name="l00016"></a>00016 <span class="comment">*/</span>
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef _SQLITE_HASH_H_</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define _SQLITE_HASH_H_</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="comment">/* Forward declarations of structures. */</span>
<a name="l00021"></a><a class="code" href="hash_8h.html#abe8fc99d29c0275271cbacd81d67ee07">00021</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structHash.html">Hash</a> <a class="code" href="structHash.html">Hash</a>;
<a name="l00022"></a><a class="code" href="hash_8h.html#ae0a4da4fe851a1c4be2140e68ef8058f">00022</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structHashElem.html">HashElem</a> <a class="code" href="structHashElem.html">HashElem</a>;
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">/* A complete hash table is an instance of the following structure.</span>
<a name="l00025"></a>00025 <span class="comment">** The internals of this structure are intended to be opaque -- client</span>
<a name="l00026"></a>00026 <span class="comment">** code should not attempt to access or modify the fields of this structure</span>
<a name="l00027"></a>00027 <span class="comment">** directly.  Change this structure only by using the routines below.</span>
<a name="l00028"></a>00028 <span class="comment">** However, many of the &quot;procedures&quot; and &quot;functions&quot; for modifying and</span>
<a name="l00029"></a>00029 <span class="comment">** accessing this structure are really macros, so we can&apos;t really make</span>
<a name="l00030"></a>00030 <span class="comment">** this structure opaque.</span>
<a name="l00031"></a>00031 <span class="comment">*/</span>
<a name="l00032"></a><a class="code" href="structHash.html">00032</a> <span class="keyword">struct </span><a class="code" href="structHash.html">Hash</a> {
<a name="l00033"></a><a class="code" href="structHash.html#af3e0020ece36c2d0c42c343c96cbc5d6">00033</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structHash.html#af3e0020ece36c2d0c42c343c96cbc5d6">copyKey</a>: 1;  <span class="comment">/* True if copy of key made on insert */</span>
<a name="l00034"></a><a class="code" href="structHash.html#a072258e24a38e09175f1308deb013bc8">00034</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structHash.html#a072258e24a38e09175f1308deb013bc8">htsize</a> : 31; <span class="comment">/* Number of buckets in the hash table */</span>
<a name="l00035"></a><a class="code" href="structHash.html#a7ab16f173cdc347ffbe39eaa85ee6fda">00035</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structHash.html#a7ab16f173cdc347ffbe39eaa85ee6fda">count</a>;       <span class="comment">/* Number of entries in this table */</span>
<a name="l00036"></a><a class="code" href="structHash.html#a2cfc9936ca2a624c6492ab6557f4705b">00036</a>   <a class="code" href="structHashElem.html">HashElem</a> *<a class="code" href="structHash.html#a2cfc9936ca2a624c6492ab6557f4705b">first</a>;          <span class="comment">/* The first element of the array */</span>
<a name="l00037"></a><a class="code" href="structHash_1_1__ht.html">00037</a>   <span class="keyword">struct </span><a class="code" href="structHash_1_1__ht.html">_ht</a> {              <span class="comment">/* the hash table */</span>
<a name="l00038"></a><a class="code" href="structHash_1_1__ht.html#a0677191178b6c7c5c6c2880f41cf24b1">00038</a>     <span class="keywordtype">int</span> <a class="code" href="structHash_1_1__ht.html#a0677191178b6c7c5c6c2880f41cf24b1">count</a>;                 <span class="comment">/* Number of entries with this hash */</span>
<a name="l00039"></a><a class="code" href="structHash_1_1__ht.html#a56fc145e7d38d9440d85ab2ea63a48ac">00039</a>     <a class="code" href="structHashElem.html">HashElem</a> *<a class="code" href="structHash_1_1__ht.html#a56fc145e7d38d9440d85ab2ea63a48ac">chain</a>;           <span class="comment">/* Pointer to first entry with this hash */</span>
<a name="l00040"></a>00040   } *<a class="code" href="structHash.html#ac0f36e03746a3fe69643db08d93bc0c4">ht</a>;
<a name="l00041"></a>00041 };
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">/* Each element in the hash table is an instance of the following </span>
<a name="l00044"></a>00044 <span class="comment">** structure.  All elements are stored on a single doubly-linked list.</span>
<a name="l00045"></a>00045 <span class="comment">**</span>
<a name="l00046"></a>00046 <span class="comment">** Again, this structure is intended to be opaque, but it can&apos;t really</span>
<a name="l00047"></a>00047 <span class="comment">** be opaque because it is used by macros.</span>
<a name="l00048"></a>00048 <span class="comment">*/</span>
<a name="l00049"></a><a class="code" href="structHashElem.html">00049</a> <span class="keyword">struct </span><a class="code" href="structHashElem.html">HashElem</a> {
<a name="l00050"></a><a class="code" href="structHashElem.html#ae4d011c0dc807a3c100ccdb927dd0ba9">00050</a>   <a class="code" href="structHashElem.html">HashElem</a> *<a class="code" href="structHashElem.html#a2d28fad45ff21ffb8a02a7133df860fd">next</a>, *<a class="code" href="structHashElem.html#ae4d011c0dc807a3c100ccdb927dd0ba9">prev</a>;   <span class="comment">/* Next and previous elements in the table */</span>
<a name="l00051"></a><a class="code" href="structHashElem.html#ac7e80f63ba2f82457ff68aa0cd360365">00051</a>   <span class="keywordtype">void</span> *<a class="code" href="structHashElem.html#ac7e80f63ba2f82457ff68aa0cd360365">data</a>;              <span class="comment">/* Data associated with this element */</span>
<a name="l00052"></a><a class="code" href="structHashElem.html#a2ba6958843c36f3290ba6e4afba1c507">00052</a>   <span class="keywordtype">void</span> *<a class="code" href="structHashElem.html#a2ba6958843c36f3290ba6e4afba1c507">pKey</a>; <span class="keywordtype">int</span> <a class="code" href="structHashElem.html#a12c1252e6aa2958f73e2ef969c9a3d81">nKey</a>;    <span class="comment">/* Key associated with this element */</span>
<a name="l00053"></a>00053 };
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/*</span>
<a name="l00056"></a>00056 <span class="comment">** Access routines.  To delete, insert a NULL pointer.</span>
<a name="l00057"></a>00057 <span class="comment">*/</span>
<a name="l00058"></a>00058 <span class="keywordtype">void</span> <a class="code" href="hash_8c.html#adffe0328817be1597940d8294d1656b9">sqlite3HashInit</a>(<a class="code" href="structHash.html">Hash</a>*, <span class="keywordtype">int</span> copyKey);
<a name="l00059"></a>00059 <span class="keywordtype">void</span> *<a class="code" href="hash_8c.html#af5451f0baf1a33b5e006c9312e326dc8">sqlite3HashInsert</a>(<a class="code" href="structHash.html">Hash</a>*, <span class="keyword">const</span> <span class="keywordtype">void</span> *pKey, <span class="keywordtype">int</span> nKey, <span class="keywordtype">void</span> *pData);
<a name="l00060"></a>00060 <span class="keywordtype">void</span> *<a class="code" href="hash_8c.html#a8245210f0a48939ff8e16119312c4c0b">sqlite3HashFind</a>(<span class="keyword">const</span> <a class="code" href="structHash.html">Hash</a>*, <span class="keyword">const</span> <span class="keywordtype">void</span> *pKey, <span class="keywordtype">int</span> nKey);
<a name="l00061"></a>00061 <a class="code" href="structHashElem.html">HashElem</a> *<a class="code" href="hash_8c.html#a46c29804cc37f8b14b93cd750eeb84db">sqlite3HashFindElem</a>(<span class="keyword">const</span> <a class="code" href="structHash.html">Hash</a>*, <span class="keyword">const</span> <span class="keywordtype">void</span> *pKey, <span class="keywordtype">int</span> nKey);
<a name="l00062"></a>00062 <span class="keywordtype">void</span> <a class="code" href="hash_8c.html#a3397fea8e95001f486ec1ff486812000">sqlite3HashClear</a>(<a class="code" href="structHash.html">Hash</a>*);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">/*</span>
<a name="l00065"></a>00065 <span class="comment">** Macros for looping over all elements of a hash table.  The idiom is</span>
<a name="l00066"></a>00066 <span class="comment">** like this:</span>
<a name="l00067"></a>00067 <span class="comment">**</span>
<a name="l00068"></a>00068 <span class="comment">**   Hash h;</span>
<a name="l00069"></a>00069 <span class="comment">**   HashElem *p;</span>
<a name="l00070"></a>00070 <span class="comment">**   ...</span>
<a name="l00071"></a>00071 <span class="comment">**   for(p=sqliteHashFirst(&amp;h); p; p=sqliteHashNext(p)){</span>
<a name="l00072"></a>00072 <span class="comment">**     SomeStructure *pData = sqliteHashData(p);</span>
<a name="l00073"></a>00073 <span class="comment">**     // do something with pData</span>
<a name="l00074"></a>00074 <span class="comment">**   }</span>
<a name="l00075"></a>00075 <span class="comment">*/</span>
<a name="l00076"></a><a class="code" href="hash_8h.html#a69a4fd27181f80b1a3da28ba1d0a0e97">00076</a> <span class="preprocessor">#define sqliteHashFirst(H)  ((H)-&gt;first)</span>
<a name="l00077"></a><a class="code" href="hash_8h.html#a114c08859626340f7d39ce26af0a3397">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define sqliteHashNext(E)   ((E)-&gt;next)</span>
<a name="l00078"></a><a class="code" href="hash_8h.html#a6f35d66e7dd8028f82972137f332a37e">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define sqliteHashData(E)   ((E)-&gt;data)</span>
<a name="l00079"></a><a class="code" href="hash_8h.html#a8f0b3021dffe0d039d90a9c871036ec9">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define sqliteHashKey(E)    ((E)-&gt;pKey)</span>
<a name="l00080"></a><a class="code" href="hash_8h.html#ad52231917bf81a286986e836f8fbc390">00080</a> <span class="preprocessor"></span><span class="preprocessor">#define sqliteHashKeysize(E) ((E)-&gt;nKey)</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="comment">/*</span>
<a name="l00083"></a>00083 <span class="comment">** Number of entries in a hash table</span>
<a name="l00084"></a>00084 <span class="comment">*/</span>
<a name="l00085"></a><a class="code" href="hash_8h.html#ab20514dd541b4af76a5914ec3a065ecb">00085</a> <span class="preprocessor">#define sqliteHashCount(H)  ((H)-&gt;count)</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a>00087 <span class="preprocessor">#endif </span><span class="comment">/* _SQLITE_HASH_H_ */</span>
</pre></div></div>
<hr size="1">

<p style="text-align: right;">
  <a href="http://www.contextlogger.org/">ContextLogger2</a>&#8212;ContextLogger2 Logger Daemon Internals&#8212;<small>Generated on Mon May 2 13:49:54 2011 by&nbsp;<a href="http://www.doxygen.org/">Doxygen</a> 1.6.1</small>
</p>

</body>
</html>
