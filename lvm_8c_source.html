<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ContextLogger2 Logger Daemon Internals: lvm.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_0a42b8d7a42fdff37378486477d8f5e0.html">lua</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_3536dc5472cf8658af6f2f3c074e6fb2.html">src</a>
  </div>
</div>
<div class="contents">
<h1>lvm.c</h1><a href="lvm_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">** $Id: lvm.c,v 2.63.1.3 2007/12/28 15:32:23 roberto Exp $</span>
<a name="l00003"></a>00003 <span class="comment">** Lua virtual machine</span>
<a name="l00004"></a>00004 <span class="comment">** See Copyright Notice in lua.h</span>
<a name="l00005"></a>00005 <span class="comment">*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a><a class="code" href="lvm_8c.html#a26fd89afa52fe8d2335f741f35611ea2">00012</a> <span class="preprocessor">#define lvm_c</span>
<a name="l00013"></a><a class="code" href="lvm_8c.html#abf0b3947b59218777a8e928a10be205b">00013</a> <span class="preprocessor"></span><span class="preprocessor">#define LUA_CORE</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="lua_8h.html">lua.h</a>&quot;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="ldebug_8h.html">ldebug.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="ldo_8h.html">ldo.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="lfunc_8h.html">lfunc.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="lgc_8h.html">lgc.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="lobject_8h.html">lobject.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="lopcodes_8h.html">lopcodes.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="lstate_8h.html">lstate.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="lstring_8h.html">lstring.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="ltable_8h.html">ltable.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="ltm_8h.html">ltm.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="lvm_8h.html">lvm.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/* limit for table tag-method chains (to avoid loops) */</span>
<a name="l00032"></a><a class="code" href="lvm_8c.html#aa25ebed8c5d8537e72643d5c81420bea">00032</a> <span class="preprocessor">#define MAXTAGLOOP  100</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="lvm_8h.html#a035d5ac2c0d25fe24f2decd16b0e7db9">00035</a> <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *<a class="code" href="lvm_8c.html#aea792c4e6a5eec41350e999d9609335e">luaV_tonumber</a> (<span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *obj, <a class="code" href="structlua__TValue.html">TValue</a> *n) {
<a name="l00036"></a>00036   <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> num;
<a name="l00037"></a>00037   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(obj)) <span class="keywordflow">return</span> obj;
<a name="l00038"></a>00038   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(obj) &amp;&amp; <a class="code" href="lobject_8c.html#ab1e3654d45c2d88563b84f63a456e97a">luaO_str2d</a>(<a class="code" href="lobject_8h.html#ac2c9eedf3ff2c3042445b3b534f161e1">svalue</a>(obj), &amp;num)) {
<a name="l00039"></a>00039     <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(n, num);
<a name="l00040"></a>00040     <span class="keywordflow">return</span> n;
<a name="l00041"></a>00041   }
<a name="l00042"></a>00042   <span class="keywordflow">else</span>
<a name="l00043"></a>00043     <span class="keywordflow">return</span> NULL;
<a name="l00044"></a>00044 }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="lvm_8h.html#abcde68a7697547dc2c7f1d0e6734e611">00047</a> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#aaa76c97841f94686c8be98f0fd0ca14d">luaV_tostring</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structlua__TValue.html">StkId</a> obj) {
<a name="l00048"></a>00048   <span class="keywordflow">if</span> (!<a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(obj))
<a name="l00049"></a>00049     <span class="keywordflow">return</span> 0;
<a name="l00050"></a>00050   <span class="keywordflow">else</span> {
<a name="l00051"></a>00051     <span class="keywordtype">char</span> s[<a class="code" href="luaconf_8h.html#ab71a9d9bf2fd8bee9f220d59f76958f0">LUAI_MAXNUMBER2STR</a>];
<a name="l00052"></a>00052     <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> n = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(obj);
<a name="l00053"></a>00053     <a class="code" href="luaconf_8h.html#a7282035aa504d3ebc9a2ce2a85fd6553">lua_number2str</a>(s, n);
<a name="l00054"></a>00054     <a class="code" href="lobject_8h.html#a2defbd1005c5aebb5807517ddea80f3f">setsvalue2s</a>(L, obj, <a class="code" href="lstring_8h.html#aba4257be9dae5dccd0cda4ac05986d4d">luaS_new</a>(L, s));
<a name="l00055"></a>00055     <span class="keywordflow">return</span> 1;
<a name="l00056"></a>00056   }
<a name="l00057"></a>00057 }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="lvm_8c.html#aae76df553eb44f9762d89e228113c5ec">00060</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#aae76df553eb44f9762d89e228113c5ec">traceexec</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="llimits_8h.html#a2d9700d30c1ae59754ecf50917c04d43">Instruction</a> *pc) {
<a name="l00061"></a>00061   <a class="code" href="llimits_8h.html#ae1fe9ac10d9803bd1d7bdf30b18bad68">lu_byte</a> mask = L-&gt;<a class="code" href="structlua__State.html#a1d4ee1613c41d6100db9e0c73217b41f">hookmask</a>;
<a name="l00062"></a>00062   <span class="keyword">const</span> <a class="code" href="llimits_8h.html#a2d9700d30c1ae59754ecf50917c04d43">Instruction</a> *oldpc = L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a>;
<a name="l00063"></a>00063   L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc;
<a name="l00064"></a>00064   <span class="keywordflow">if</span> ((mask &amp; <a class="code" href="lua_8h.html#a29927bc26e642df4f842e0235d290c56">LUA_MASKCOUNT</a>) &amp;&amp; L-&gt;<a class="code" href="structlua__State.html#a8824aded162dcdb9d3a142a90819e372">hookcount</a> == 0) {
<a name="l00065"></a>00065     <a class="code" href="ldebug_8h.html#ac42e5618900e7522d70474fcfbddab58">resethookcount</a>(L);
<a name="l00066"></a>00066     <a class="code" href="ldo_8c.html#ac0e683e74512ba38441c5a5035ffec6c">luaD_callhook</a>(L, <a class="code" href="lua_8h.html#a6c7cb905c4d6a2d21e6261b6ccec7298">LUA_HOOKCOUNT</a>, -1);
<a name="l00067"></a>00067   }
<a name="l00068"></a>00068   <span class="keywordflow">if</span> (mask &amp; <a class="code" href="lua_8h.html#a671bc8ae0eddd679411c7f2401a594cf">LUA_MASKLINE</a>) {
<a name="l00069"></a>00069     <a class="code" href="structProto.html">Proto</a> *p = <a class="code" href="lstate_8h.html#a12b504eee786ce8f2c703a22c03d477e">ci_func</a>(L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>)-&gt;l.p;
<a name="l00070"></a>00070     <span class="keywordtype">int</span> npc = <a class="code" href="ldebug_8h.html#a90cad524ed41d15bada161ecd74037ad">pcRel</a>(pc, p);
<a name="l00071"></a>00071     <span class="keywordtype">int</span> newline = <a class="code" href="ldebug_8h.html#aaf173b063074236fab0f77f3b093a16c">getline</a>(p, npc);
<a name="l00072"></a>00072     <span class="comment">/* call linehook when enter a new function, when jump back (loop),</span>
<a name="l00073"></a>00073 <span class="comment">       or when enter a new line */</span>
<a name="l00074"></a>00074     <span class="keywordflow">if</span> (npc == 0 || pc &lt;= oldpc || newline != <a class="code" href="ldebug_8h.html#aaf173b063074236fab0f77f3b093a16c">getline</a>(p, <a class="code" href="ldebug_8h.html#a90cad524ed41d15bada161ecd74037ad">pcRel</a>(oldpc, p)))
<a name="l00075"></a>00075       <a class="code" href="ldo_8c.html#ac0e683e74512ba38441c5a5035ffec6c">luaD_callhook</a>(L, <a class="code" href="lua_8h.html#af2e15cf6167fde2aab753f2a8228de06">LUA_HOOKLINE</a>, newline);
<a name="l00076"></a>00076   }
<a name="l00077"></a>00077 }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">00080</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">callTMres</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structlua__TValue.html">StkId</a> res, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *<a class="code" href="libluasqlite3_8c.html#ae16fcc70ad2cbf55b1906507bcb6fa33">f</a>,
<a name="l00081"></a>00081                         <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p1, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p2) {
<a name="l00082"></a>00082   ptrdiff_t result = <a class="code" href="ldo_8h.html#a3534573bbeec89c6dbdb3eae5a54f9b9">savestack</a>(L, res);
<a name="l00083"></a>00083   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>, f);  <span class="comment">/* push function */</span>
<a name="l00084"></a>00084   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>+1, p1);  <span class="comment">/* 1st argument */</span>
<a name="l00085"></a>00085   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>+2, p2);  <span class="comment">/* 2nd argument */</span>
<a name="l00086"></a>00086   <a class="code" href="ldo_8h.html#ab1500a6449b9cdf335e3c7ce23aa85d7">luaD_checkstack</a>(L, 3);
<a name="l00087"></a>00087   L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> += 3;
<a name="l00088"></a>00088   <a class="code" href="ldo_8c.html#a5483fddd87ca999e7d037bf397ab7997">luaD_call</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> - 3, 1);
<a name="l00089"></a>00089   res = <a class="code" href="ldo_8h.html#a3fbde7f289e6bf661575e9b802da9e78">restorestack</a>(L, result);
<a name="l00090"></a>00090   L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>--;
<a name="l00091"></a>00091   <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, res, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>);
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="lvm_8c.html#a769e0465df0e6e14ba7c8b7b8831b4cb">00096</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#a769e0465df0e6e14ba7c8b7b8831b4cb">callTM</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *<a class="code" href="libluasqlite3_8c.html#ae16fcc70ad2cbf55b1906507bcb6fa33">f</a>, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p1,
<a name="l00097"></a>00097                     <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p2, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p3) {
<a name="l00098"></a>00098   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>, f);  <span class="comment">/* push function */</span>
<a name="l00099"></a>00099   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>+1, p1);  <span class="comment">/* 1st argument */</span>
<a name="l00100"></a>00100   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>+2, p2);  <span class="comment">/* 2nd argument */</span>
<a name="l00101"></a>00101   <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>+3, p3);  <span class="comment">/* 3th argument */</span>
<a name="l00102"></a>00102   <a class="code" href="ldo_8h.html#ab1500a6449b9cdf335e3c7ce23aa85d7">luaD_checkstack</a>(L, 4);
<a name="l00103"></a>00103   L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> += 4;
<a name="l00104"></a>00104   <a class="code" href="ldo_8c.html#a5483fddd87ca999e7d037bf397ab7997">luaD_call</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> - 4, 0);
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="lvm_8h.html#adacdbccc9d8fab937a1b0dc058c8da12">00108</a> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#a3e9cff2d6a1f188a843099d2cff146a7">luaV_gettable</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *t, <a class="code" href="structlua__TValue.html">TValue</a> *key, <a class="code" href="structlua__TValue.html">StkId</a> val) {
<a name="l00109"></a>00109   <span class="keywordtype">int</span> loop;
<a name="l00110"></a>00110   <span class="keywordflow">for</span> (loop = 0; loop &lt; <a class="code" href="lvm_8c.html#aa25ebed8c5d8537e72643d5c81420bea">MAXTAGLOOP</a>; loop++) {
<a name="l00111"></a>00111     <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm;
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#ac5338f5fe3885d1ee65412e00a44384e">ttistable</a>(t)) {  <span class="comment">/* `t&apos; is a table? */</span>
<a name="l00113"></a>00113       <a class="code" href="structTable.html">Table</a> *h = <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t);
<a name="l00114"></a>00114       <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *res = <a class="code" href="ltable_8c.html#a8b4fce00d7db27ee9caac3d49863dea3">luaH_get</a>(h, key); <span class="comment">/* do a primitive get */</span>
<a name="l00115"></a>00115       <span class="keywordflow">if</span> (!<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(res) ||  <span class="comment">/* result is no nil? */</span>
<a name="l00116"></a>00116           (tm = <a class="code" href="ltm_8h.html#a0a29ed88450f8f92330a6a411a9c8134">fasttm</a>(L, h-&gt;<a class="code" href="structTable.html#a99c20fa696fb6a4e89890efa3819ebdc">metatable</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a9adb5d2c8bad970dff73ee1b9df1242e">TM_INDEX</a>)) == NULL) { <span class="comment">/* or no TM? */</span>
<a name="l00117"></a>00117         <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, val, res);
<a name="l00118"></a>00118         <span class="keywordflow">return</span>;
<a name="l00119"></a>00119       }
<a name="l00120"></a>00120       <span class="comment">/* else will try the tag method */</span>
<a name="l00121"></a>00121     }
<a name="l00122"></a>00122     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(tm = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, t, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a9adb5d2c8bad970dff73ee1b9df1242e">TM_INDEX</a>)))
<a name="l00123"></a>00123       <a class="code" href="ldebug_8c.html#ac435d10ca9d22f7dd70bfb36fa41a649">luaG_typeerror</a>(L, t, <span class="stringliteral">&quot;index&quot;</span>);
<a name="l00124"></a>00124     <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a48587dcb78721d149d3184d0768f4950">ttisfunction</a>(tm)) {
<a name="l00125"></a>00125       <a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">callTMres</a>(L, val, tm, t, key);
<a name="l00126"></a>00126       <span class="keywordflow">return</span>;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128     t = tm;  <span class="comment">/* else repeat with `tm&apos; */</span> 
<a name="l00129"></a>00129   }
<a name="l00130"></a>00130   <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <span class="stringliteral">&quot;loop in gettable&quot;</span>);
<a name="l00131"></a>00131 }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="lvm_8h.html#a5885d48fd66eb236f8b8f6e4938cbcce">00134</a> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#aee212b8fb5fcda851dc6f57b133d840f">luaV_settable</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *t, <a class="code" href="structlua__TValue.html">TValue</a> *key, <a class="code" href="structlua__TValue.html">StkId</a> val) {
<a name="l00135"></a>00135   <span class="keywordtype">int</span> loop;
<a name="l00136"></a>00136   <span class="keywordflow">for</span> (loop = 0; loop &lt; <a class="code" href="lvm_8c.html#aa25ebed8c5d8537e72643d5c81420bea">MAXTAGLOOP</a>; loop++) {
<a name="l00137"></a>00137     <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm;
<a name="l00138"></a>00138     <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#ac5338f5fe3885d1ee65412e00a44384e">ttistable</a>(t)) {  <span class="comment">/* `t&apos; is a table? */</span>
<a name="l00139"></a>00139       <a class="code" href="structTable.html">Table</a> *h = <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t);
<a name="l00140"></a>00140       <a class="code" href="structlua__TValue.html">TValue</a> *oldval = <a class="code" href="ltable_8c.html#ab6b8518d8099b17f3ef58df047237fba">luaH_set</a>(L, h, key); <span class="comment">/* do a primitive set */</span>
<a name="l00141"></a>00141       <span class="keywordflow">if</span> (!<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(oldval) ||  <span class="comment">/* result is no nil? */</span>
<a name="l00142"></a>00142           (tm = <a class="code" href="ltm_8h.html#a0a29ed88450f8f92330a6a411a9c8134">fasttm</a>(L, h-&gt;<a class="code" href="structTable.html#a99c20fa696fb6a4e89890efa3819ebdc">metatable</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a256e00a44fb438064c2eb7a8b7df206d">TM_NEWINDEX</a>)) == NULL) { <span class="comment">/* or no TM? */</span>
<a name="l00143"></a>00143         <a class="code" href="lobject_8h.html#adefdd17d98f1f5734ee296395e1805d4">setobj2t</a>(L, oldval, val);
<a name="l00144"></a>00144         <a class="code" href="lgc_8h.html#af06a36c96d2a39e8f60b653671b02ef6">luaC_barriert</a>(L, h, val);
<a name="l00145"></a>00145         <span class="keywordflow">return</span>;
<a name="l00146"></a>00146       }
<a name="l00147"></a>00147       <span class="comment">/* else will try the tag method */</span>
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(tm = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, t, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a256e00a44fb438064c2eb7a8b7df206d">TM_NEWINDEX</a>)))
<a name="l00150"></a>00150       <a class="code" href="ldebug_8c.html#ac435d10ca9d22f7dd70bfb36fa41a649">luaG_typeerror</a>(L, t, <span class="stringliteral">&quot;index&quot;</span>);
<a name="l00151"></a>00151     <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a48587dcb78721d149d3184d0768f4950">ttisfunction</a>(tm)) {
<a name="l00152"></a>00152       <a class="code" href="lvm_8c.html#a769e0465df0e6e14ba7c8b7b8831b4cb">callTM</a>(L, tm, t, key, val);
<a name="l00153"></a>00153       <span class="keywordflow">return</span>;
<a name="l00154"></a>00154     }
<a name="l00155"></a>00155     t = tm;  <span class="comment">/* else repeat with `tm&apos; */</span> 
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157   <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <span class="stringliteral">&quot;loop in settable&quot;</span>);
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="lvm_8c.html#a5f9dd797eb313b8e117cb20546276732">00161</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#a5f9dd797eb313b8e117cb20546276732">call_binTM</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p1, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p2,
<a name="l00162"></a>00162                        <a class="code" href="structlua__TValue.html">StkId</a> res, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1">TMS</a> event) {
<a name="l00163"></a>00163   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, p1, event);  <span class="comment">/* try first operand */</span>
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(tm))
<a name="l00165"></a>00165     tm = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, p2, event);  <span class="comment">/* try second operand */</span>
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(tm)) <span class="keywordflow">return</span> 0;
<a name="l00167"></a>00167   <a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">callTMres</a>(L, res, tm, p1, p2);
<a name="l00168"></a>00168   <span class="keywordflow">return</span> 1;
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="lvm_8c.html#a850d56d56e6527f5c824e473df024d5d">00172</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *<a class="code" href="lvm_8c.html#a850d56d56e6527f5c824e473df024d5d">get_compTM</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structTable.html">Table</a> *mt1, <a class="code" href="structTable.html">Table</a> *mt2,
<a name="l00173"></a>00173                                   <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1">TMS</a> event) {
<a name="l00174"></a>00174   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm1 = <a class="code" href="ltm_8h.html#a0a29ed88450f8f92330a6a411a9c8134">fasttm</a>(L, mt1, event);
<a name="l00175"></a>00175   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm2;
<a name="l00176"></a>00176   <span class="keywordflow">if</span> (tm1 == NULL) <span class="keywordflow">return</span> NULL;  <span class="comment">/* no metamethod */</span>
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (mt1 == mt2) <span class="keywordflow">return</span> tm1;  <span class="comment">/* same metatables =&gt; same metamethods */</span>
<a name="l00178"></a>00178   tm2 = <a class="code" href="ltm_8h.html#a0a29ed88450f8f92330a6a411a9c8134">fasttm</a>(L, mt2, event);
<a name="l00179"></a>00179   <span class="keywordflow">if</span> (tm2 == NULL) <span class="keywordflow">return</span> NULL;  <span class="comment">/* no metamethod */</span>
<a name="l00180"></a>00180   <span class="keywordflow">if</span> (<a class="code" href="lobject_8c.html#a491502522b283e90c5fa3391f66827dc">luaO_rawequalObj</a>(tm1, tm2))  <span class="comment">/* same metamethods? */</span>
<a name="l00181"></a>00181     <span class="keywordflow">return</span> tm1;
<a name="l00182"></a>00182   <span class="keywordflow">return</span> NULL;
<a name="l00183"></a>00183 }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="lvm_8c.html#a1d1301ff4a771ce4198673dd113d10a5">00186</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#a1d1301ff4a771ce4198673dd113d10a5">call_orderTM</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p1, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *p2,
<a name="l00187"></a>00187                          <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1">TMS</a> event) {
<a name="l00188"></a>00188   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm1 = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, p1, event);
<a name="l00189"></a>00189   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm2;
<a name="l00190"></a>00190   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(tm1)) <span class="keywordflow">return</span> -1;  <span class="comment">/* no metamethod? */</span>
<a name="l00191"></a>00191   tm2 = <a class="code" href="ltm_8c.html#a0a3a3df9d6e7f17d806f74d411e59b2d">luaT_gettmbyobj</a>(L, p2, event);
<a name="l00192"></a>00192   <span class="keywordflow">if</span> (!<a class="code" href="lobject_8c.html#a491502522b283e90c5fa3391f66827dc">luaO_rawequalObj</a>(tm1, tm2))  <span class="comment">/* different metamethods? */</span>
<a name="l00193"></a>00193     <span class="keywordflow">return</span> -1;
<a name="l00194"></a>00194   <a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">callTMres</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>, tm1, p1, p2);
<a name="l00195"></a>00195   <span class="keywordflow">return</span> !<a class="code" href="lobject_8h.html#a188e1a95c8c6d547a13431a6e1edd5b3">l_isfalse</a>(L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>);
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="lvm_8c.html#af609f8da5aa129c2dfe05d03f7001c03">00199</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#af609f8da5aa129c2dfe05d03f7001c03">l_strcmp</a> (<span class="keyword">const</span> <a class="code" href="unionTString.html">TString</a> *ls, <span class="keyword">const</span> <a class="code" href="unionTString.html">TString</a> *rs) {
<a name="l00200"></a>00200   <span class="keyword">const</span> <span class="keywordtype">char</span> *l = <a class="code" href="lobject_8h.html#acb05d3ab238923581a9c629b8e11a6ac">getstr</a>(ls);
<a name="l00201"></a>00201   <span class="keywordtype">size_t</span> ll = ls-&gt;<a class="code" href="unionTString.html#a97a1b646cc81c8d947d2a0857173f284">tsv</a>.<a class="code" href="unionTString.html#a6b5aaf70a9fcad72f7ba17975f548b0d">len</a>;
<a name="l00202"></a>00202   <span class="keyword">const</span> <span class="keywordtype">char</span> *r = <a class="code" href="lobject_8h.html#acb05d3ab238923581a9c629b8e11a6ac">getstr</a>(rs);
<a name="l00203"></a>00203   <span class="keywordtype">size_t</span> lr = rs-&gt;<a class="code" href="unionTString.html#a97a1b646cc81c8d947d2a0857173f284">tsv</a>.<a class="code" href="unionTString.html#a6b5aaf70a9fcad72f7ba17975f548b0d">len</a>;
<a name="l00204"></a>00204   <span class="keywordflow">for</span> (;;) {
<a name="l00205"></a>00205     <span class="keywordtype">int</span> temp = strcoll(l, r);
<a name="l00206"></a>00206     <span class="keywordflow">if</span> (temp != 0) <span class="keywordflow">return</span> temp;
<a name="l00207"></a>00207     <span class="keywordflow">else</span> {  <span class="comment">/* strings are equal up to a `\0&apos; */</span>
<a name="l00208"></a>00208       <span class="keywordtype">size_t</span> len = strlen(l);  <span class="comment">/* index of first `\0&apos; in both strings */</span>
<a name="l00209"></a>00209       <span class="keywordflow">if</span> (len == lr)  <span class="comment">/* r is finished? */</span>
<a name="l00210"></a>00210         <span class="keywordflow">return</span> (len == ll) ? 0 : 1;
<a name="l00211"></a>00211       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (len == ll)  <span class="comment">/* l is finished? */</span>
<a name="l00212"></a>00212         <span class="keywordflow">return</span> -1;  <span class="comment">/* l is smaller than r (because r is not finished) */</span>
<a name="l00213"></a>00213       <span class="comment">/* both strings longer than `len&apos;; go on comparing (after the `\0&apos;) */</span>
<a name="l00214"></a>00214       len++;
<a name="l00215"></a>00215       l += len; ll -= len; r += len; lr -= len;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="lvm_8h.html#a1245a563d674251ea03c7abbd1a2ca8c">00221</a> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#a82cf4e4e2322eef8c4c53b98669e2ada">luaV_lessthan</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *l, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *r) {
<a name="l00222"></a>00222   <span class="keywordtype">int</span> res;
<a name="l00223"></a>00223   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(l) != <a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(r))
<a name="l00224"></a>00224     <span class="keywordflow">return</span> <a class="code" href="ldebug_8c.html#a73c2897b44470d40e39663273889f98a">luaG_ordererror</a>(L, l, r);
<a name="l00225"></a>00225   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(l))
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <a class="code" href="luaconf_8h.html#ae035faaeb068720ee8540210870ee5c9">luai_numlt</a>(<a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(l), <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(r));
<a name="l00227"></a>00227   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(l))
<a name="l00228"></a>00228     <span class="keywordflow">return</span> <a class="code" href="lvm_8c.html#af609f8da5aa129c2dfe05d03f7001c03">l_strcmp</a>(<a class="code" href="lobject_8h.html#aa6b88d61caae428f98c0289a15ce9f5e">rawtsvalue</a>(l), <a class="code" href="lobject_8h.html#aa6b88d61caae428f98c0289a15ce9f5e">rawtsvalue</a>(r)) &lt; 0;
<a name="l00229"></a>00229   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res = <a class="code" href="lvm_8c.html#a1d1301ff4a771ce4198673dd113d10a5">call_orderTM</a>(L, l, r, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1afa8fa71435d77125e294751a6ec36dc0">TM_LT</a>)) != -1)
<a name="l00230"></a>00230     <span class="keywordflow">return</span> res;
<a name="l00231"></a>00231   <span class="keywordflow">return</span> <a class="code" href="ldebug_8c.html#a73c2897b44470d40e39663273889f98a">luaG_ordererror</a>(L, l, r);
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="lvm_8c.html#af54502f98d11367a0bd511c900039c12">00235</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#af54502f98d11367a0bd511c900039c12">lessequal</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *l, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *r) {
<a name="l00236"></a>00236   <span class="keywordtype">int</span> res;
<a name="l00237"></a>00237   <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(l) != <a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(r))
<a name="l00238"></a>00238     <span class="keywordflow">return</span> <a class="code" href="ldebug_8c.html#a73c2897b44470d40e39663273889f98a">luaG_ordererror</a>(L, l, r);
<a name="l00239"></a>00239   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(l))
<a name="l00240"></a>00240     <span class="keywordflow">return</span> <a class="code" href="luaconf_8h.html#af803655e8c9be7ba1f3f3fb0c4f730d7">luai_numle</a>(<a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(l), <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(r));
<a name="l00241"></a>00241   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(l))
<a name="l00242"></a>00242     <span class="keywordflow">return</span> <a class="code" href="lvm_8c.html#af609f8da5aa129c2dfe05d03f7001c03">l_strcmp</a>(<a class="code" href="lobject_8h.html#aa6b88d61caae428f98c0289a15ce9f5e">rawtsvalue</a>(l), <a class="code" href="lobject_8h.html#aa6b88d61caae428f98c0289a15ce9f5e">rawtsvalue</a>(r)) &lt;= 0;
<a name="l00243"></a>00243   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res = <a class="code" href="lvm_8c.html#a1d1301ff4a771ce4198673dd113d10a5">call_orderTM</a>(L, l, r, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1acb92c94037b451f214223a4c57eccbdf">TM_LE</a>)) != -1)  <span class="comment">/* first try `le&apos; */</span>
<a name="l00244"></a>00244     <span class="keywordflow">return</span> res;
<a name="l00245"></a>00245   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res = <a class="code" href="lvm_8c.html#a1d1301ff4a771ce4198673dd113d10a5">call_orderTM</a>(L, r, l, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1afa8fa71435d77125e294751a6ec36dc0">TM_LT</a>)) != -1)  <span class="comment">/* else try `lt&apos; */</span>
<a name="l00246"></a>00246     <span class="keywordflow">return</span> !res;
<a name="l00247"></a>00247   <span class="keywordflow">return</span> <a class="code" href="ldebug_8c.html#a73c2897b44470d40e39663273889f98a">luaG_ordererror</a>(L, l, r);
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="lvm_8h.html#ab36eb004475445fd98e8360f5b161e9e">00251</a> <span class="keywordtype">int</span> <a class="code" href="lvm_8c.html#abe4fce43934cc68bf167c802b174f245">luaV_equalval</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *t1, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *t2) {
<a name="l00252"></a>00252   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *tm;
<a name="l00253"></a>00253   <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(t1) == <a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(t2));
<a name="l00254"></a>00254   <span class="keywordflow">switch</span> (<a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(t1)) {
<a name="l00255"></a>00255     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#ae38a6fb8c687b8bfab211b7675a695ef">LUA_TNIL</a>: <span class="keywordflow">return</span> 1;
<a name="l00256"></a>00256     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a7f62ecb240cb38da9c8a53b41fe21ed9">LUA_TNUMBER</a>: <span class="keywordflow">return</span> <a class="code" href="luaconf_8h.html#ae06bbbe345c8bb028e233120466d387d">luai_numeq</a>(<a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(t1), <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(t2));
<a name="l00257"></a>00257     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a611808ed12d4c2aee2a9e298a9d9a9bf">LUA_TBOOLEAN</a>: <span class="keywordflow">return</span> <a class="code" href="lobject_8h.html#acabf05e821337a6de6a4a6632045032b">bvalue</a>(t1) == <a class="code" href="lobject_8h.html#acabf05e821337a6de6a4a6632045032b">bvalue</a>(t2);  <span class="comment">/* true must be 1 !! */</span>
<a name="l00258"></a>00258     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#aa030c2d649070173902c8094d8e0e2cd">LUA_TLIGHTUSERDATA</a>: <span class="keywordflow">return</span> <a class="code" href="lobject_8h.html#a16c0267c035b3e4edda082e25069e8cf">pvalue</a>(t1) == <a class="code" href="lobject_8h.html#a16c0267c035b3e4edda082e25069e8cf">pvalue</a>(t2);
<a name="l00259"></a>00259     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a84fd4c52cea4073671a4cd0eb7026dc7">LUA_TUSERDATA</a>: {
<a name="l00260"></a>00260       <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a1c49f55d93297e833141fb62903af3ad">uvalue</a>(t1) == <a class="code" href="lobject_8h.html#a1c49f55d93297e833141fb62903af3ad">uvalue</a>(t2)) <span class="keywordflow">return</span> 1;
<a name="l00261"></a>00261       tm = <a class="code" href="lvm_8c.html#a850d56d56e6527f5c824e473df024d5d">get_compTM</a>(L, <a class="code" href="lobject_8h.html#a1c49f55d93297e833141fb62903af3ad">uvalue</a>(t1)-&gt;metatable, <a class="code" href="lobject_8h.html#a1c49f55d93297e833141fb62903af3ad">uvalue</a>(t2)-&gt;metatable,
<a name="l00262"></a>00262                          <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa0074eac874e7e19d5e7c0c8a22ea592">TM_EQ</a>);
<a name="l00263"></a>00263       <span class="keywordflow">break</span>;  <span class="comment">/* will try TM */</span>
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265     <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a31620fd8da5b655b7879e16a116ec31a">LUA_TTABLE</a>: {
<a name="l00266"></a>00266       <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t1) == <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t2)) <span class="keywordflow">return</span> 1;
<a name="l00267"></a>00267       tm = <a class="code" href="lvm_8c.html#a850d56d56e6527f5c824e473df024d5d">get_compTM</a>(L, <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t1)-&gt;metatable, <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(t2)-&gt;metatable, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa0074eac874e7e19d5e7c0c8a22ea592">TM_EQ</a>);
<a name="l00268"></a>00268       <span class="keywordflow">break</span>;  <span class="comment">/* will try TM */</span>
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270     <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="lobject_8h.html#a05cdf6070135f10ad37e1048a730b634">gcvalue</a>(t1) == <a class="code" href="lobject_8h.html#a05cdf6070135f10ad37e1048a730b634">gcvalue</a>(t2);
<a name="l00271"></a>00271   }
<a name="l00272"></a>00272   <span class="keywordflow">if</span> (tm == NULL) <span class="keywordflow">return</span> 0;  <span class="comment">/* no TM? */</span>
<a name="l00273"></a>00273   <a class="code" href="lvm_8c.html#a6956dcdfecb9944ae5e2987d1b1f6706">callTMres</a>(L, L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>, tm, t1, t2);  <span class="comment">/* call TM */</span>
<a name="l00274"></a>00274   <span class="keywordflow">return</span> !<a class="code" href="lobject_8h.html#a188e1a95c8c6d547a13431a6e1edd5b3">l_isfalse</a>(L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>);
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="lvm_8h.html#af41cc3d1eee450f6766075b786de064d">00278</a> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#a6ba8066ec1460f73ff3ee49654dfca80">luaV_concat</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keywordtype">int</span> total, <span class="keywordtype">int</span> last) {
<a name="l00279"></a>00279   <span class="keywordflow">do</span> {
<a name="l00280"></a>00280     <a class="code" href="structlua__TValue.html">StkId</a> top = L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a> + last + 1;
<a name="l00281"></a>00281     <span class="keywordtype">int</span> n = 2;  <span class="comment">/* number of elements handled in this pass (at least 2) */</span>
<a name="l00282"></a>00282     <span class="keywordflow">if</span> (!(<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(top-2) || <a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(top-2)) || !<a class="code" href="lvm_8h.html#ac4af8d3b7a2c325068e51a81b01d0a65">tostring</a>(L, top-1)) {
<a name="l00283"></a>00283       <span class="keywordflow">if</span> (!<a class="code" href="lvm_8c.html#a5f9dd797eb313b8e117cb20546276732">call_binTM</a>(L, top-2, top-1, top-2, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aef8c5f56efb01cf7a514270559237343">TM_CONCAT</a>))
<a name="l00284"></a>00284         <a class="code" href="ldebug_8c.html#a35847e9106b2a11342d215199492ded4">luaG_concaterror</a>(L, top-2, top-1);
<a name="l00285"></a>00285     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a8661397faed512ccc9c70a4661f1a83d">tsvalue</a>(top-1)-&gt;len == 0)  <span class="comment">/* second op is empty? */</span>
<a name="l00286"></a>00286       (void)<a class="code" href="lvm_8h.html#ac4af8d3b7a2c325068e51a81b01d0a65">tostring</a>(L, top - 2);  <span class="comment">/* result is first op (as string) */</span>
<a name="l00287"></a>00287     <span class="keywordflow">else</span> {
<a name="l00288"></a>00288       <span class="comment">/* at least two string values; get as many as possible */</span>
<a name="l00289"></a>00289       <span class="keywordtype">size_t</span> tl = <a class="code" href="lobject_8h.html#a8661397faed512ccc9c70a4661f1a83d">tsvalue</a>(top-1)-&gt;len;
<a name="l00290"></a>00290       <span class="keywordtype">char</span> *buffer;
<a name="l00291"></a>00291       <span class="keywordtype">int</span> i;
<a name="l00292"></a>00292       <span class="comment">/* collect total length */</span>
<a name="l00293"></a>00293       <span class="keywordflow">for</span> (n = 1; n &lt; total &amp;&amp; <a class="code" href="lvm_8h.html#ac4af8d3b7a2c325068e51a81b01d0a65">tostring</a>(L, top-n-1); n++) {
<a name="l00294"></a>00294         <span class="keywordtype">size_t</span> l = <a class="code" href="lobject_8h.html#a8661397faed512ccc9c70a4661f1a83d">tsvalue</a>(top-n-1)-&gt;len;
<a name="l00295"></a>00295         <span class="keywordflow">if</span> (l &gt;= <a class="code" href="llimits_8h.html#aa927c7bf177c162feda3483e1e972b3a">MAX_SIZET</a> - tl) <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <span class="stringliteral">&quot;string length overflow&quot;</span>);
<a name="l00296"></a>00296         tl += l;
<a name="l00297"></a>00297       }
<a name="l00298"></a>00298       buffer = <a class="code" href="lzio_8c.html#a4f037d52a7c5321825d6fec40b532648">luaZ_openspace</a>(L, &amp;<a class="code" href="lstate_8h.html#a103db2de6edf3420c6c6c9a282562406">G</a>(L)-&gt;buff, tl);
<a name="l00299"></a>00299       tl = 0;
<a name="l00300"></a>00300       <span class="keywordflow">for</span> (i=n; i&gt;0; i--) {  <span class="comment">/* concat all strings */</span>
<a name="l00301"></a>00301         <span class="keywordtype">size_t</span> l = <a class="code" href="lobject_8h.html#a8661397faed512ccc9c70a4661f1a83d">tsvalue</a>(top-i)-&gt;len;
<a name="l00302"></a>00302         memcpy(buffer+tl, <a class="code" href="lobject_8h.html#ac2c9eedf3ff2c3042445b3b534f161e1">svalue</a>(top-i), l);
<a name="l00303"></a>00303         tl += l;
<a name="l00304"></a>00304       }
<a name="l00305"></a>00305       <a class="code" href="lobject_8h.html#a2defbd1005c5aebb5807517ddea80f3f">setsvalue2s</a>(L, top-n, <a class="code" href="lstring_8c.html#ab41fb084ce3ea5e2779f6659ccc2484d">luaS_newlstr</a>(L, buffer, tl));
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307     total -= n-1;  <span class="comment">/* got `n&apos; strings to create 1 new */</span>
<a name="l00308"></a>00308     last -= n-1;
<a name="l00309"></a>00309   } <span class="keywordflow">while</span> (total &gt; 1);  <span class="comment">/* repeat until only 1 result left */</span>
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00313"></a><a class="code" href="lvm_8c.html#afd7f4b8b772430134a40e34acd59421a">00313</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#afd7f4b8b772430134a40e34acd59421a">Arith</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structlua__TValue.html">StkId</a> ra, <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *rb,
<a name="l00314"></a>00314                    <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *rc, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1">TMS</a> op) {
<a name="l00315"></a>00315   <a class="code" href="structlua__TValue.html">TValue</a> tempb, tempc;
<a name="l00316"></a>00316   <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *b, *c;
<a name="l00317"></a>00317   <span class="keywordflow">if</span> ((b = <a class="code" href="lvm_8c.html#aea792c4e6a5eec41350e999d9609335e">luaV_tonumber</a>(rb, &amp;tempb)) != NULL &amp;&amp;
<a name="l00318"></a>00318       (c = <a class="code" href="lvm_8c.html#aea792c4e6a5eec41350e999d9609335e">luaV_tonumber</a>(rc, &amp;tempc)) != NULL) {
<a name="l00319"></a>00319     <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> nb = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(b), nc = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(c);
<a name="l00320"></a>00320     <span class="keywordflow">switch</span> (op) {
<a name="l00321"></a>00321       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1ab9351e0ba5143d069dfb4dea793676b5">TM_ADD</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a29f2b954495cc2fe4d8147bfd78ce6af">luai_numadd</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00322"></a>00322       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aae0e4c65a5c4797c1dbb82609504f0f6">TM_SUB</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a50790bab6ef62cac53cfa7e21db878f0">luai_numsub</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00323"></a>00323       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a6291d50fca67ff97d7092975c2ab2dc4">TM_MUL</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#ad5f5b06bab71b2816ed2e229962ad567">luai_nummul</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00324"></a>00324       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa5bfa1609bcf15e4105b991a7975ac03">TM_DIV</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a1cd288191059cf0417928bf0b2fe20c4">luai_numdiv</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00325"></a>00325       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1afbd50be6cf5042cdf520fb50627081ae">TM_MOD</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#abc674fb5e808e3b7e8a71512d71aa290">luai_nummod</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00326"></a>00326       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa4846ab09831f6b351671be81cef3e5d">TM_POW</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a1e682db818e89acbc4dba66f22117ab7">luai_numpow</a>(nb, nc)); <span class="keywordflow">break</span>;
<a name="l00327"></a>00327       <span class="keywordflow">case</span> <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a9ba35e1d71b4d8aca322d84a070528dd">TM_UNM</a>: <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a33379acb6803a5a36258381e714c3c02">luai_numunm</a>(nb)); <span class="keywordflow">break</span>;
<a name="l00328"></a>00328       <span class="keywordflow">default</span>: <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(0); <span class="keywordflow">break</span>;
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330   }
<a name="l00331"></a>00331   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="lvm_8c.html#a5f9dd797eb313b8e117cb20546276732">call_binTM</a>(L, rb, rc, ra, op))
<a name="l00332"></a>00332     <a class="code" href="ldebug_8c.html#a5d76c740cd1619e024dc6de84a86b8fc">luaG_aritherror</a>(L, rb, rc);
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 <span class="comment">/*</span>
<a name="l00338"></a>00338 <span class="comment">** some macros for common tasks in `luaV_execute&apos;</span>
<a name="l00339"></a>00339 <span class="comment">*/</span>
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="lvm_8c.html#ac8ac87769df235baa83b7a5c4f3aaed4">00341</a> <span class="preprocessor">#define runtime_check(L, c) { if (!(c)) break; }</span>
<a name="l00342"></a>00342 <span class="preprocessor"></span>
<a name="l00343"></a><a class="code" href="lvm_8c.html#a721dd0af7e652d2d98b1f765f7860bcb">00343</a> <span class="preprocessor">#define RA(i) (base+GETARG_A(i))</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span><span class="comment">/* to be used after possible stack reallocation */</span>
<a name="l00345"></a><a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">00345</a> <span class="preprocessor">#define RB(i) check_exp(getBMode(GET_OPCODE(i)) == OpArgR, base+GETARG_B(i))</span>
<a name="l00346"></a><a class="code" href="lvm_8c.html#a316a781a03ac24357a00b0037fb38565">00346</a> <span class="preprocessor"></span><span class="preprocessor">#define RC(i) check_exp(getCMode(GET_OPCODE(i)) == OpArgR, base+GETARG_C(i))</span>
<a name="l00347"></a><a class="code" href="lvm_8c.html#ac4cc17d368facfc7598cd1409b894b56">00347</a> <span class="preprocessor"></span><span class="preprocessor">#define RKB(i)  check_exp(getBMode(GET_OPCODE(i)) == OpArgK, \</span>
<a name="l00348"></a>00348 <span class="preprocessor">  ISK(GETARG_B(i)) ? k+INDEXK(GETARG_B(i)) : base+GETARG_B(i))</span>
<a name="l00349"></a><a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">00349</a> <span class="preprocessor"></span><span class="preprocessor">#define RKC(i)  check_exp(getCMode(GET_OPCODE(i)) == OpArgK, \</span>
<a name="l00350"></a>00350 <span class="preprocessor">  ISK(GETARG_C(i)) ? k+INDEXK(GETARG_C(i)) : base+GETARG_C(i))</span>
<a name="l00351"></a><a class="code" href="lvm_8c.html#ae691958903f692936bb97a9ce2a65d0d">00351</a> <span class="preprocessor"></span><span class="preprocessor">#define KBx(i)  check_exp(getBMode(GET_OPCODE(i)) == OpArgK, k+GETARG_Bx(i))</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span>
<a name="l00353"></a>00353 
<a name="l00354"></a><a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">00354</a> <span class="preprocessor">#define dojump(L,pc,i)  {(pc) += (i); luai_threadyield(L);}</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">00357</a> <span class="preprocessor">#define Protect(x)  { L-&gt;savedpc = pc; {x;}; base = L-&gt;base; }</span>
<a name="l00358"></a>00358 <span class="preprocessor"></span>
<a name="l00359"></a>00359 
<a name="l00360"></a><a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">00360</a> <span class="preprocessor">#define arith_op(op,tm) { \</span>
<a name="l00361"></a>00361 <span class="preprocessor">        TValue *rb = RKB(i); \</span>
<a name="l00362"></a>00362 <span class="preprocessor">        TValue *rc = RKC(i); \</span>
<a name="l00363"></a>00363 <span class="preprocessor">        if (ttisnumber(rb) &amp;&amp; ttisnumber(rc)) { \</span>
<a name="l00364"></a>00364 <span class="preprocessor">          lua_Number nb = nvalue(rb), nc = nvalue(rc); \</span>
<a name="l00365"></a>00365 <span class="preprocessor">          setnvalue(ra, op(nb, nc)); \</span>
<a name="l00366"></a>00366 <span class="preprocessor">        } \</span>
<a name="l00367"></a>00367 <span class="preprocessor">        else \</span>
<a name="l00368"></a>00368 <span class="preprocessor">          Protect(Arith(L, ra, rb, rc, tm)); \</span>
<a name="l00369"></a>00369 <span class="preprocessor">      }</span>
<a name="l00370"></a>00370 <span class="preprocessor"></span>
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="lvm_8h.html#a87789a43e7c878fb89bf12788d80e1f9">00373</a> <span class="keywordtype">void</span> <a class="code" href="lvm_8c.html#a6c9458d97019b82b12f364e97686eb1e">luaV_execute</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <span class="keywordtype">int</span> nexeccalls) {
<a name="l00374"></a>00374   <a class="code" href="structLClosure.html">LClosure</a> *cl;
<a name="l00375"></a>00375   <a class="code" href="structlua__TValue.html">StkId</a> base;
<a name="l00376"></a>00376   <a class="code" href="structlua__TValue.html">TValue</a> *k;
<a name="l00377"></a>00377   <span class="keyword">const</span> <a class="code" href="llimits_8h.html#a2d9700d30c1ae59754ecf50917c04d43">Instruction</a> *pc;
<a name="l00378"></a>00378  reentry:  <span class="comment">/* entry point */</span>
<a name="l00379"></a>00379   <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lstate_8h.html#a489eab424b094f54dd7f6b35e2cf68a2">isLua</a>(L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>));
<a name="l00380"></a>00380   pc = L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a>;
<a name="l00381"></a>00381   cl = &amp;<a class="code" href="lobject_8h.html#a4b49383d348897fe282c0d51354d8bc9">clvalue</a>(L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#a378cfb37136fabfe59d1c38071c6c9d1">func</a>)-&gt;l;
<a name="l00382"></a>00382   base = L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a>;
<a name="l00383"></a>00383   k = cl-&gt;<a class="code" href="structLClosure.html#a4cf173817d3897b0e70822e70d241d6c">p</a>-&gt;<a class="code" href="structProto.html#ae292fb0c0558679704933824ce96eac2">k</a>;
<a name="l00384"></a>00384   <span class="comment">/* main loop of interpreter */</span>
<a name="l00385"></a>00385   <span class="keywordflow">for</span> (;;) {
<a name="l00386"></a>00386     <span class="keyword">const</span> <a class="code" href="llimits_8h.html#a2d9700d30c1ae59754ecf50917c04d43">Instruction</a> i = *pc++;
<a name="l00387"></a>00387     <a class="code" href="structlua__TValue.html">StkId</a> ra;
<a name="l00388"></a>00388     <span class="keywordflow">if</span> ((L-&gt;<a class="code" href="structlua__State.html#a1d4ee1613c41d6100db9e0c73217b41f">hookmask</a> &amp; (<a class="code" href="lua_8h.html#a671bc8ae0eddd679411c7f2401a594cf">LUA_MASKLINE</a> | <a class="code" href="lua_8h.html#a29927bc26e642df4f842e0235d290c56">LUA_MASKCOUNT</a>)) &amp;&amp;
<a name="l00389"></a>00389         (--L-&gt;<a class="code" href="structlua__State.html#a8824aded162dcdb9d3a142a90819e372">hookcount</a> == 0 || L-&gt;<a class="code" href="structlua__State.html#a1d4ee1613c41d6100db9e0c73217b41f">hookmask</a> &amp; <a class="code" href="lua_8h.html#a671bc8ae0eddd679411c7f2401a594cf">LUA_MASKLINE</a>)) {
<a name="l00390"></a>00390       <a class="code" href="lvm_8c.html#aae76df553eb44f9762d89e228113c5ec">traceexec</a>(L, pc);
<a name="l00391"></a>00391       <span class="keywordflow">if</span> (L-&gt;<a class="code" href="structlua__State.html#a563f8f114867e0b03405680633672102">status</a> == <a class="code" href="lua_8h.html#ab69f4bd0c0693d4c8fcfc0ebaeb2806b">LUA_YIELD</a>) {  <span class="comment">/* did hook yield? */</span>
<a name="l00392"></a>00392         L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc - 1;
<a name="l00393"></a>00393         <span class="keywordflow">return</span>;
<a name="l00394"></a>00394       }
<a name="l00395"></a>00395       base = L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a>;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397     <span class="comment">/* warning!! several calls may realloc the stack and invalidate `ra&apos; */</span>
<a name="l00398"></a>00398     ra = <a class="code" href="lvm_8c.html#a721dd0af7e652d2d98b1f765f7860bcb">RA</a>(i);
<a name="l00399"></a>00399     <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(base == L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a> &amp;&amp; L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a> == L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#a7b8303ad59b7ba200cd5e3a26b118fbf">base</a>);
<a name="l00400"></a>00400     <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(base &lt;= L-&gt;top &amp;&amp; L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> &lt;= L-&gt;<a class="code" href="structlua__State.html#a27e1d5122ef7fffae7542814c72fdd2f">stack</a> + L-&gt;<a class="code" href="structlua__State.html#a44530127453a374634f7ad22eee9ec6c">stacksize</a>);
<a name="l00401"></a>00401     <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> == L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a> || <a class="code" href="ldebug_8c.html#a4d9ff6cdad8269e1255371a4d70829d9">luaG_checkopenop</a>(i));
<a name="l00402"></a>00402     <span class="keywordflow">switch</span> (<a class="code" href="lopcodes_8h.html#aaa146179c3677b790c5681dcd82f0acc">GET_OPCODE</a>(i)) {
<a name="l00403"></a>00403       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7addf83bbc02b6a88d325135c880d12184">OP_MOVE</a>: {
<a name="l00404"></a>00404         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, ra, <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i));
<a name="l00405"></a>00405         <span class="keywordflow">continue</span>;
<a name="l00406"></a>00406       }
<a name="l00407"></a>00407       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab34a8eaf6d32d3c41810653d9eb99c1a">OP_LOADK</a>: {
<a name="l00408"></a>00408         <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, ra, <a class="code" href="lvm_8c.html#ae691958903f692936bb97a9ce2a65d0d">KBx</a>(i));
<a name="l00409"></a>00409         <span class="keywordflow">continue</span>;
<a name="l00410"></a>00410       }
<a name="l00411"></a>00411       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5f66d1583580293a60f96a26770e5ba">OP_LOADBOOL</a>: {
<a name="l00412"></a>00412         <a class="code" href="lobject_8h.html#a22e86755164a1bc172b40f344d7ce70e">setbvalue</a>(ra, <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i));
<a name="l00413"></a>00413         <span class="keywordflow">if</span> (<a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i)) pc++;  <span class="comment">/* skip next instruction (if C) */</span>
<a name="l00414"></a>00414         <span class="keywordflow">continue</span>;
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5c399a98a26c923cdae3971b5e5b6432">OP_LOADNIL</a>: {
<a name="l00417"></a>00417         <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i);
<a name="l00418"></a>00418         <span class="keywordflow">do</span> {
<a name="l00419"></a>00419           <a class="code" href="lobject_8h.html#ad9034def7bbc1965ec3d714d84620b07">setnilvalue</a>(rb--);
<a name="l00420"></a>00420         } <span class="keywordflow">while</span> (rb &gt;= ra);
<a name="l00421"></a>00421         <span class="keywordflow">continue</span>;
<a name="l00422"></a>00422       }
<a name="l00423"></a>00423       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab48573533495922f053a7d1c9b0d00b4">OP_GETUPVAL</a>: {
<a name="l00424"></a>00424         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00425"></a>00425         <a class="code" href="lobject_8h.html#a1c51b9462c606f1f97242fae6b1220d1">setobj2s</a>(L, ra, cl-&gt;<a class="code" href="structLClosure.html#a94886e7c7df838f5fab36575b0554682">upvals</a>[b]-&gt;<a class="code" href="structUpVal.html#aeb2c6e23d98883dd7f117de69de23e54">v</a>);
<a name="l00426"></a>00426         <span class="keywordflow">continue</span>;
<a name="l00427"></a>00427       }
<a name="l00428"></a>00428       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a729612e249653e5ab46b6be3bb376910">OP_GETGLOBAL</a>: {
<a name="l00429"></a>00429         <a class="code" href="structlua__TValue.html">TValue</a> g;
<a name="l00430"></a>00430         <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#ae691958903f692936bb97a9ce2a65d0d">KBx</a>(i);
<a name="l00431"></a>00431         <a class="code" href="lobject_8h.html#ab9379699ac579d54410e3542f061bbad">sethvalue</a>(L, &amp;g, cl-&gt;env);
<a name="l00432"></a>00432         <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(rb));
<a name="l00433"></a>00433         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#a3e9cff2d6a1f188a843099d2cff146a7">luaV_gettable</a>(L, &amp;g, rb, ra));
<a name="l00434"></a>00434         <span class="keywordflow">continue</span>;
<a name="l00435"></a>00435       }
<a name="l00436"></a>00436       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab1ec2a36c59db7612249cc31e382fdd9">OP_GETTABLE</a>: {
<a name="l00437"></a>00437         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#a3e9cff2d6a1f188a843099d2cff146a7">luaV_gettable</a>(L, <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i), <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i), ra));
<a name="l00438"></a>00438         <span class="keywordflow">continue</span>;
<a name="l00439"></a>00439       }
<a name="l00440"></a>00440       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af61bd9bc4032eb3716946058ecd96f7a">OP_SETGLOBAL</a>: {
<a name="l00441"></a>00441         <a class="code" href="structlua__TValue.html">TValue</a> g;
<a name="l00442"></a>00442         <a class="code" href="lobject_8h.html#ab9379699ac579d54410e3542f061bbad">sethvalue</a>(L, &amp;g, cl-&gt;env);
<a name="l00443"></a>00443         <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lobject_8h.html#a9bdf057a0de8da2ffae3ac35662dd255">ttisstring</a>(<a class="code" href="lvm_8c.html#ae691958903f692936bb97a9ce2a65d0d">KBx</a>(i)));
<a name="l00444"></a>00444         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#aee212b8fb5fcda851dc6f57b133d840f">luaV_settable</a>(L, &amp;g, <a class="code" href="lvm_8c.html#ae691958903f692936bb97a9ce2a65d0d">KBx</a>(i), ra));
<a name="l00445"></a>00445         <span class="keywordflow">continue</span>;
<a name="l00446"></a>00446       }
<a name="l00447"></a>00447       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a47df60373847890b47b447c870aea678">OP_SETUPVAL</a>: {
<a name="l00448"></a>00448         <a class="code" href="structUpVal.html">UpVal</a> *uv = cl-&gt;<a class="code" href="structLClosure.html#a94886e7c7df838f5fab36575b0554682">upvals</a>[<a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i)];
<a name="l00449"></a>00449         <a class="code" href="lobject_8h.html#acf2af15f3d5cceca8e8870f96634bc2d">setobj</a>(L, uv-&gt;<a class="code" href="structUpVal.html#aeb2c6e23d98883dd7f117de69de23e54">v</a>, ra);
<a name="l00450"></a>00450         <a class="code" href="lgc_8h.html#a21660a316c42bc1aad10f115e2261bca">luaC_barrier</a>(L, uv, ra);
<a name="l00451"></a>00451         <span class="keywordflow">continue</span>;
<a name="l00452"></a>00452       }
<a name="l00453"></a>00453       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a34315d7408f31b006bf41c9e9c2d736e">OP_SETTABLE</a>: {
<a name="l00454"></a>00454         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#aee212b8fb5fcda851dc6f57b133d840f">luaV_settable</a>(L, ra, <a class="code" href="lvm_8c.html#ac4cc17d368facfc7598cd1409b894b56">RKB</a>(i), <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i)));
<a name="l00455"></a>00455         <span class="keywordflow">continue</span>;
<a name="l00456"></a>00456       }
<a name="l00457"></a>00457       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af4ae9eb9a3c88596112a1d99d0c66280">OP_NEWTABLE</a>: {
<a name="l00458"></a>00458         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00459"></a>00459         <span class="keywordtype">int</span> c = <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i);
<a name="l00460"></a>00460         <a class="code" href="lobject_8h.html#ab9379699ac579d54410e3542f061bbad">sethvalue</a>(L, ra, <a class="code" href="ltable_8c.html#a7295cd1ebcc8e39f2b23079bb575d2e6">luaH_new</a>(L, <a class="code" href="lobject_8c.html#a343c0628f26c31dfeb37043a67d7cc63">luaO_fb2int</a>(b), <a class="code" href="lobject_8c.html#a343c0628f26c31dfeb37043a67d7cc63">luaO_fb2int</a>(c)));
<a name="l00461"></a>00461         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lgc_8h.html#ad013db5004ccc5fbe8a6450caa1f1ad9">luaC_checkGC</a>(L));
<a name="l00462"></a>00462         <span class="keywordflow">continue</span>;
<a name="l00463"></a>00463       }
<a name="l00464"></a>00464       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a64bea18253f9e73c4c5fcfa6b0d5abd2">OP_SELF</a>: {
<a name="l00465"></a>00465         <a class="code" href="structlua__TValue.html">StkId</a> rb = <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i);
<a name="l00466"></a>00466         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, ra+1, rb);
<a name="l00467"></a>00467         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#a3e9cff2d6a1f188a843099d2cff146a7">luaV_gettable</a>(L, rb, <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i), ra));
<a name="l00468"></a>00468         <span class="keywordflow">continue</span>;
<a name="l00469"></a>00469       }
<a name="l00470"></a>00470       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a96186829480e5b34b1373288e956b1c8">OP_ADD</a>: {
<a name="l00471"></a>00471         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#a29f2b954495cc2fe4d8147bfd78ce6af">luai_numadd</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1ab9351e0ba5143d069dfb4dea793676b5">TM_ADD</a>);
<a name="l00472"></a>00472         <span class="keywordflow">continue</span>;
<a name="l00473"></a>00473       }
<a name="l00474"></a>00474       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6c224b456bd394d4d8bad0631ca8e2b7">OP_SUB</a>: {
<a name="l00475"></a>00475         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#a50790bab6ef62cac53cfa7e21db878f0">luai_numsub</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aae0e4c65a5c4797c1dbb82609504f0f6">TM_SUB</a>);
<a name="l00476"></a>00476         <span class="keywordflow">continue</span>;
<a name="l00477"></a>00477       }
<a name="l00478"></a>00478       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa0e08a6f94350f03d29e4a55d543ba2f">OP_MUL</a>: {
<a name="l00479"></a>00479         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#ad5f5b06bab71b2816ed2e229962ad567">luai_nummul</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a6291d50fca67ff97d7092975c2ab2dc4">TM_MUL</a>);
<a name="l00480"></a>00480         <span class="keywordflow">continue</span>;
<a name="l00481"></a>00481       }
<a name="l00482"></a>00482       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a719aeab2140dd5f575d1559b95bf74e1">OP_DIV</a>: {
<a name="l00483"></a>00483         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#a1cd288191059cf0417928bf0b2fe20c4">luai_numdiv</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa5bfa1609bcf15e4105b991a7975ac03">TM_DIV</a>);
<a name="l00484"></a>00484         <span class="keywordflow">continue</span>;
<a name="l00485"></a>00485       }
<a name="l00486"></a>00486       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a39c596fc7eae450b7218bd97126e37c9">OP_MOD</a>: {
<a name="l00487"></a>00487         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#abc674fb5e808e3b7e8a71512d71aa290">luai_nummod</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1afbd50be6cf5042cdf520fb50627081ae">TM_MOD</a>);
<a name="l00488"></a>00488         <span class="keywordflow">continue</span>;
<a name="l00489"></a>00489       }
<a name="l00490"></a>00490       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a35127684be890cfd81d556dc84d5f9db">OP_POW</a>: {
<a name="l00491"></a>00491         <a class="code" href="lvm_8c.html#a862e89cd3761462c766077097bfd0a26">arith_op</a>(<a class="code" href="luaconf_8h.html#a1e682db818e89acbc4dba66f22117ab7">luai_numpow</a>, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aa4846ab09831f6b351671be81cef3e5d">TM_POW</a>);
<a name="l00492"></a>00492         <span class="keywordflow">continue</span>;
<a name="l00493"></a>00493       }
<a name="l00494"></a>00494       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ae3fd0932f8be8e5e810d731fd60ab8ef">OP_UNM</a>: {
<a name="l00495"></a>00495         <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i);
<a name="l00496"></a>00496         <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a7a1392f89b1f29ed3b1afa37a22d0be2">ttisnumber</a>(rb)) {
<a name="l00497"></a>00497           <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> nb = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(rb);
<a name="l00498"></a>00498           <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a33379acb6803a5a36258381e714c3c02">luai_numunm</a>(nb));
<a name="l00499"></a>00499         }
<a name="l00500"></a>00500         <span class="keywordflow">else</span> {
<a name="l00501"></a>00501           <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#afd7f4b8b772430134a40e34acd59421a">Arith</a>(L, ra, rb, rb, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1a9ba35e1d71b4d8aca322d84a070528dd">TM_UNM</a>));
<a name="l00502"></a>00502         }
<a name="l00503"></a>00503         <span class="keywordflow">continue</span>;
<a name="l00504"></a>00504       }
<a name="l00505"></a>00505       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a36a6b73cc4823f54891a013e2cc760d1">OP_NOT</a>: {
<a name="l00506"></a>00506         <span class="keywordtype">int</span> res = <a class="code" href="lobject_8h.html#a188e1a95c8c6d547a13431a6e1edd5b3">l_isfalse</a>(<a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i));  <span class="comment">/* next assignment may change this value */</span>
<a name="l00507"></a>00507         <a class="code" href="lobject_8h.html#a22e86755164a1bc172b40f344d7ce70e">setbvalue</a>(ra, res);
<a name="l00508"></a>00508         <span class="keywordflow">continue</span>;
<a name="l00509"></a>00509       }
<a name="l00510"></a>00510       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a55406931f4958f887e6d966d154a1931">OP_LEN</a>: {
<a name="l00511"></a>00511         <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i);
<a name="l00512"></a>00512         <span class="keywordflow">switch</span> (<a class="code" href="lobject_8h.html#acd205ab396b96fba48e1f758c17a2cf3">ttype</a>(rb)) {
<a name="l00513"></a>00513           <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a31620fd8da5b655b7879e16a116ec31a">LUA_TTABLE</a>: {
<a name="l00514"></a>00514             <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="llimits_8h.html#ac92cecb12c5aba1164877e81e76e2cb6">cast_num</a>(<a class="code" href="ltable_8c.html#a58e2274fe56b64bbd2d9174b63d16492">luaH_getn</a>(<a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(rb))));
<a name="l00515"></a>00515             <span class="keywordflow">break</span>;
<a name="l00516"></a>00516           }
<a name="l00517"></a>00517           <span class="keywordflow">case</span> <a class="code" href="lua_8h.html#a57de20d87bb5131a3159f2bd52e3fab6">LUA_TSTRING</a>: {
<a name="l00518"></a>00518             <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="llimits_8h.html#ac92cecb12c5aba1164877e81e76e2cb6">cast_num</a>(<a class="code" href="lobject_8h.html#a8661397faed512ccc9c70a4661f1a83d">tsvalue</a>(rb)-&gt;len));
<a name="l00519"></a>00519             <span class="keywordflow">break</span>;
<a name="l00520"></a>00520           }
<a name="l00521"></a>00521           <span class="keywordflow">default</span>: {  <span class="comment">/* try metamethod */</span>
<a name="l00522"></a>00522             <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(
<a name="l00523"></a>00523               <span class="keywordflow">if</span> (!<a class="code" href="lvm_8c.html#a5f9dd797eb313b8e117cb20546276732">call_binTM</a>(L, rb, <a class="code" href="lobject_8h.html#a7b3b558006786b9088568ae50483603a">luaO_nilobject</a>, ra, <a class="code" href="ltm_8h.html#a69e345ae253d250b61a03f1d6871c8d1aadbac1e8e363dc76eb94aac5c8e7a7a4">TM_LEN</a>))
<a name="l00524"></a>00524                 <a class="code" href="ldebug_8c.html#ac435d10ca9d22f7dd70bfb36fa41a649">luaG_typeerror</a>(L, rb, <span class="stringliteral">&quot;get length of&quot;</span>);
<a name="l00525"></a>00525             )
<a name="l00526"></a>00526           }
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528         <span class="keywordflow">continue</span>;
<a name="l00529"></a>00529       }
<a name="l00530"></a>00530       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a28a7da14b1413b441cf2a5d433b43a51">OP_CONCAT</a>: {
<a name="l00531"></a>00531         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00532"></a>00532         <span class="keywordtype">int</span> c = <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i);
<a name="l00533"></a>00533         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lvm_8c.html#a6ba8066ec1460f73ff3ee49654dfca80">luaV_concat</a>(L, c-b+1, c); <a class="code" href="lgc_8h.html#ad013db5004ccc5fbe8a6450caa1f1ad9">luaC_checkGC</a>(L));
<a name="l00534"></a>00534         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, <a class="code" href="lvm_8c.html#a721dd0af7e652d2d98b1f765f7860bcb">RA</a>(i), base+b);
<a name="l00535"></a>00535         <span class="keywordflow">continue</span>;
<a name="l00536"></a>00536       }
<a name="l00537"></a>00537       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7afd679fab86e6a91d22c91734e287639b">OP_JMP</a>: {
<a name="l00538"></a>00538         <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(i));
<a name="l00539"></a>00539         <span class="keywordflow">continue</span>;
<a name="l00540"></a>00540       }
<a name="l00541"></a>00541       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1634898deb6e4d1bcb15416034c641c5">OP_EQ</a>: {
<a name="l00542"></a>00542         <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#ac4cc17d368facfc7598cd1409b894b56">RKB</a>(i);
<a name="l00543"></a>00543         <a class="code" href="structlua__TValue.html">TValue</a> *rc = <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i);
<a name="l00544"></a>00544         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(
<a name="l00545"></a>00545           <span class="keywordflow">if</span> (<a class="code" href="lvm_8h.html#aa2cf0219381d4d4c3d7108f1f11fdf42">equalobj</a>(L, rb, rc) == <a class="code" href="lopcodes_8h.html#a1d504abc1e2246548f89977210dce0b9">GETARG_A</a>(i))
<a name="l00546"></a>00546             <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));
<a name="l00547"></a>00547         )
<a name="l00548"></a>00548         pc++;
<a name="l00549"></a>00549         <span class="keywordflow">continue</span>;
<a name="l00550"></a>00550       }
<a name="l00551"></a>00551       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7d5ed006824d331041dad8486e52df50">OP_LT</a>: {
<a name="l00552"></a>00552         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(
<a name="l00553"></a>00553           <span class="keywordflow">if</span> (<a class="code" href="lvm_8c.html#a82cf4e4e2322eef8c4c53b98669e2ada">luaV_lessthan</a>(L, <a class="code" href="lvm_8c.html#ac4cc17d368facfc7598cd1409b894b56">RKB</a>(i), <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i)) == <a class="code" href="lopcodes_8h.html#a1d504abc1e2246548f89977210dce0b9">GETARG_A</a>(i))
<a name="l00554"></a>00554             <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));
<a name="l00555"></a>00555         )
<a name="l00556"></a>00556         pc++;
<a name="l00557"></a>00557         <span class="keywordflow">continue</span>;
<a name="l00558"></a>00558       }
<a name="l00559"></a>00559       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7acef6e71b662db063ff532d89500bb0c0">OP_LE</a>: {
<a name="l00560"></a>00560         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(
<a name="l00561"></a>00561           <span class="keywordflow">if</span> (<a class="code" href="lvm_8c.html#af54502f98d11367a0bd511c900039c12">lessequal</a>(L, <a class="code" href="lvm_8c.html#ac4cc17d368facfc7598cd1409b894b56">RKB</a>(i), <a class="code" href="lvm_8c.html#a621b920c2683748903f90d71a1fb157b">RKC</a>(i)) == <a class="code" href="lopcodes_8h.html#a1d504abc1e2246548f89977210dce0b9">GETARG_A</a>(i))
<a name="l00562"></a>00562             <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));
<a name="l00563"></a>00563         )
<a name="l00564"></a>00564         pc++;
<a name="l00565"></a>00565         <span class="keywordflow">continue</span>;
<a name="l00566"></a>00566       }
<a name="l00567"></a>00567       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8952e66300f2660060e38c67ccd21c9d">OP_TEST</a>: {
<a name="l00568"></a>00568         <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a188e1a95c8c6d547a13431a6e1edd5b3">l_isfalse</a>(ra) != <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i))
<a name="l00569"></a>00569           <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));
<a name="l00570"></a>00570         pc++;
<a name="l00571"></a>00571         <span class="keywordflow">continue</span>;
<a name="l00572"></a>00572       }
<a name="l00573"></a>00573       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a39b4077a15fb8fffc166f5045dddacee">OP_TESTSET</a>: {
<a name="l00574"></a>00574         <a class="code" href="structlua__TValue.html">TValue</a> *rb = <a class="code" href="lvm_8c.html#a2688e9bc2c975760015dd57956107eb4">RB</a>(i);
<a name="l00575"></a>00575         <span class="keywordflow">if</span> (<a class="code" href="lobject_8h.html#a188e1a95c8c6d547a13431a6e1edd5b3">l_isfalse</a>(rb) != <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i)) {
<a name="l00576"></a>00576           <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, ra, rb);
<a name="l00577"></a>00577           <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));
<a name="l00578"></a>00578         }
<a name="l00579"></a>00579         pc++;
<a name="l00580"></a>00580         <span class="keywordflow">continue</span>;
<a name="l00581"></a>00581       }
<a name="l00582"></a>00582       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a098bbeea13096667b102f7fd90cbe38f">OP_CALL</a>: {
<a name="l00583"></a>00583         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00584"></a>00584         <span class="keywordtype">int</span> nresults = <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i) - 1;
<a name="l00585"></a>00585         <span class="keywordflow">if</span> (b != 0) L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = ra+b;  <span class="comment">/* else previous instruction set top */</span>
<a name="l00586"></a>00586         L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc;
<a name="l00587"></a>00587         <span class="keywordflow">switch</span> (<a class="code" href="ldo_8c.html#a457e0f1c2e2f960d4132af6899f52488">luaD_precall</a>(L, ra, nresults)) {
<a name="l00588"></a>00588           <span class="keywordflow">case</span> <a class="code" href="ldo_8h.html#a117e78798c8e00245bdf3284815e454d">PCRLUA</a>: {
<a name="l00589"></a>00589             nexeccalls++;
<a name="l00590"></a>00590             <span class="keywordflow">goto</span> reentry;  <span class="comment">/* restart luaV_execute over new Lua function */</span>
<a name="l00591"></a>00591           }
<a name="l00592"></a>00592           <span class="keywordflow">case</span> <a class="code" href="ldo_8h.html#aab301a1c468f946b9a26e4c0b1176a75">PCRC</a>: {
<a name="l00593"></a>00593             <span class="comment">/* it was a C function (`precall&apos; called it); adjust results */</span>
<a name="l00594"></a>00594             <span class="keywordflow">if</span> (nresults &gt;= 0) L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a>;
<a name="l00595"></a>00595             base = L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a>;
<a name="l00596"></a>00596             <span class="keywordflow">continue</span>;
<a name="l00597"></a>00597           }
<a name="l00598"></a>00598           <span class="keywordflow">default</span>: {
<a name="l00599"></a>00599             <span class="keywordflow">return</span>;  <span class="comment">/* yield */</span>
<a name="l00600"></a>00600           }
<a name="l00601"></a>00601         }
<a name="l00602"></a>00602       }
<a name="l00603"></a>00603       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aff2c07ebfd82aa22cc247e9855a16069">OP_TAILCALL</a>: {
<a name="l00604"></a>00604         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00605"></a>00605         <span class="keywordflow">if</span> (b != 0) L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = ra+b;  <span class="comment">/* else previous instruction set top */</span>
<a name="l00606"></a>00606         L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc;
<a name="l00607"></a>00607         <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i) - 1 == <a class="code" href="lua_8h.html#ace3545adc11664c2f2b152fbe8b6283c">LUA_MULTRET</a>);
<a name="l00608"></a>00608         <span class="keywordflow">switch</span> (<a class="code" href="ldo_8c.html#a457e0f1c2e2f960d4132af6899f52488">luaD_precall</a>(L, ra, <a class="code" href="lua_8h.html#ace3545adc11664c2f2b152fbe8b6283c">LUA_MULTRET</a>)) {
<a name="l00609"></a>00609           <span class="keywordflow">case</span> <a class="code" href="ldo_8h.html#a117e78798c8e00245bdf3284815e454d">PCRLUA</a>: {
<a name="l00610"></a>00610             <span class="comment">/* tail call: put new frame in place of previous one */</span>
<a name="l00611"></a>00611             <a class="code" href="structCallInfo.html">CallInfo</a> *ci = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a> - 1;  <span class="comment">/* previous frame */</span>
<a name="l00612"></a>00612             <span class="keywordtype">int</span> aux;
<a name="l00613"></a>00613             <a class="code" href="structlua__TValue.html">StkId</a> func = ci-&gt;<a class="code" href="structCallInfo.html#a378cfb37136fabfe59d1c38071c6c9d1">func</a>;
<a name="l00614"></a>00614             <a class="code" href="structlua__TValue.html">StkId</a> pfunc = (ci+1)-&gt;func;  <span class="comment">/* previous function index */</span>
<a name="l00615"></a>00615             <span class="keywordflow">if</span> (L-&gt;<a class="code" href="structlua__State.html#a9055a00dd8a0fd55fd2df6554b8a2d58">openupval</a>) <a class="code" href="lfunc_8c.html#ab50c76a12250379a898290f481de4ab6">luaF_close</a>(L, ci-&gt;<a class="code" href="structCallInfo.html#a7b8303ad59b7ba200cd5e3a26b118fbf">base</a>);
<a name="l00616"></a>00616             L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a> = ci-&gt;<a class="code" href="structCallInfo.html#a7b8303ad59b7ba200cd5e3a26b118fbf">base</a> = ci-&gt;<a class="code" href="structCallInfo.html#a378cfb37136fabfe59d1c38071c6c9d1">func</a> + ((ci+1)-&gt;base - pfunc);
<a name="l00617"></a>00617             <span class="keywordflow">for</span> (aux = 0; pfunc+aux &lt; L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a>; aux++)  <span class="comment">/* move frame down */</span>
<a name="l00618"></a>00618               <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, func+aux, pfunc+aux);
<a name="l00619"></a>00619             ci-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a> = L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = func+aux;  <span class="comment">/* correct top */</span>
<a name="l00620"></a>00620             <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> == L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a> + <a class="code" href="lobject_8h.html#a4b49383d348897fe282c0d51354d8bc9">clvalue</a>(func)-&gt;l.p-&gt;maxstacksize);
<a name="l00621"></a>00621             ci-&gt;<a class="code" href="structCallInfo.html#a4f8b835724037f01569452eab143948f">savedpc</a> = L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a>;
<a name="l00622"></a>00622             ci-&gt;<a class="code" href="structCallInfo.html#ae00bf2bdc64fc9d3f6599b6446b323c6">tailcalls</a>++;  <span class="comment">/* one more call lost */</span>
<a name="l00623"></a>00623             L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>--;  <span class="comment">/* remove new frame */</span>
<a name="l00624"></a>00624             <span class="keywordflow">goto</span> reentry;
<a name="l00625"></a>00625           }
<a name="l00626"></a>00626           <span class="keywordflow">case</span> <a class="code" href="ldo_8h.html#aab301a1c468f946b9a26e4c0b1176a75">PCRC</a>: {  <span class="comment">/* it was a C function (`precall&apos; called it) */</span>
<a name="l00627"></a>00627             base = L-&gt;<a class="code" href="structlua__State.html#ac11fa7aeb6254b8de57fb9d1dd06fdf2">base</a>;
<a name="l00628"></a>00628             <span class="keywordflow">continue</span>;
<a name="l00629"></a>00629           }
<a name="l00630"></a>00630           <span class="keywordflow">default</span>: {
<a name="l00631"></a>00631             <span class="keywordflow">return</span>;  <span class="comment">/* yield */</span>
<a name="l00632"></a>00632           }
<a name="l00633"></a>00633         }
<a name="l00634"></a>00634       }
<a name="l00635"></a>00635       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ad436c18b194473f5ec64c28b774e41b3">OP_RETURN</a>: {
<a name="l00636"></a>00636         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00637"></a>00637         <span class="keywordflow">if</span> (b != 0) L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = ra+b-1;
<a name="l00638"></a>00638         <span class="keywordflow">if</span> (L-&gt;<a class="code" href="structlua__State.html#a9055a00dd8a0fd55fd2df6554b8a2d58">openupval</a>) <a class="code" href="lfunc_8c.html#ab50c76a12250379a898290f481de4ab6">luaF_close</a>(L, base);
<a name="l00639"></a>00639         L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc;
<a name="l00640"></a>00640         b = <a class="code" href="ldo_8c.html#ab8dd9f24545048df9f9d68751918030a">luaD_poscall</a>(L, ra);
<a name="l00641"></a>00641         <span class="keywordflow">if</span> (--nexeccalls == 0)  <span class="comment">/* was previous function running `here&apos;? */</span>
<a name="l00642"></a>00642           <span class="keywordflow">return</span>;  <span class="comment">/* no: return */</span>
<a name="l00643"></a>00643         <span class="keywordflow">else</span> {  <span class="comment">/* yes: continue its execution */</span>
<a name="l00644"></a>00644           <span class="keywordflow">if</span> (b) L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a>;
<a name="l00645"></a>00645           <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lstate_8h.html#a489eab424b094f54dd7f6b35e2cf68a2">isLua</a>(L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>));
<a name="l00646"></a>00646           <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lopcodes_8h.html#aaa146179c3677b790c5681dcd82f0acc">GET_OPCODE</a>(*((L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>)-&gt;savedpc - 1)) == <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a098bbeea13096667b102f7fd90cbe38f">OP_CALL</a>);
<a name="l00647"></a>00647           <span class="keywordflow">goto</span> reentry;
<a name="l00648"></a>00648         }
<a name="l00649"></a>00649       }
<a name="l00650"></a>00650       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa01470a2fc70a3f2dbd20c7c8f270802">OP_FORLOOP</a>: {
<a name="l00651"></a>00651         <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> step = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(ra+2);
<a name="l00652"></a>00652         <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> idx = <a class="code" href="luaconf_8h.html#a29f2b954495cc2fe4d8147bfd78ce6af">luai_numadd</a>(<a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(ra), step); <span class="comment">/* increment index */</span>
<a name="l00653"></a>00653         <a class="code" href="lua_8h.html#af0a6ed3b852d680769cfc410a0672172">lua_Number</a> limit = <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(ra+1);
<a name="l00654"></a>00654         <span class="keywordflow">if</span> (<a class="code" href="luaconf_8h.html#ae035faaeb068720ee8540210870ee5c9">luai_numlt</a>(0, step) ? <a class="code" href="luaconf_8h.html#af803655e8c9be7ba1f3f3fb0c4f730d7">luai_numle</a>(idx, limit)
<a name="l00655"></a>00655                                 : <a class="code" href="luaconf_8h.html#af803655e8c9be7ba1f3f3fb0c4f730d7">luai_numle</a>(limit, idx)) {
<a name="l00656"></a>00656           <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(i));  <span class="comment">/* jump back */</span>
<a name="l00657"></a>00657           <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, idx);  <span class="comment">/* update internal index... */</span>
<a name="l00658"></a>00658           <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra+3, idx);  <span class="comment">/* ...and external index */</span>
<a name="l00659"></a>00659         }
<a name="l00660"></a>00660         <span class="keywordflow">continue</span>;
<a name="l00661"></a>00661       }
<a name="l00662"></a>00662       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5277c6eb2b1ab790c4942fdccd749e33">OP_FORPREP</a>: {
<a name="l00663"></a>00663         <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *init = ra;
<a name="l00664"></a>00664         <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *plimit = ra+1;
<a name="l00665"></a>00665         <span class="keyword">const</span> <a class="code" href="structlua__TValue.html">TValue</a> *pstep = ra+2;
<a name="l00666"></a>00666         L-&gt;<a class="code" href="structlua__State.html#afe3db9d5ed89b57fe5d4ec0bd7aea8e1">savedpc</a> = pc;  <span class="comment">/* next steps may throw errors */</span>
<a name="l00667"></a>00667         <span class="keywordflow">if</span> (!<a class="code" href="lvm_8h.html#af9edcc5da8ea1ac07ffdf79fbe5bb95c">tonumber</a>(init, ra))
<a name="l00668"></a>00668           <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <a class="code" href="luaconf_8h.html#afa035bf534f18141e29c98e3a222074c">LUA_QL</a>(<span class="stringliteral">&quot;for&quot;</span>) <span class="stringliteral">&quot; initial value must be a number&quot;</span>);
<a name="l00669"></a>00669         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="lvm_8h.html#af9edcc5da8ea1ac07ffdf79fbe5bb95c">tonumber</a>(plimit, ra+1))
<a name="l00670"></a>00670           <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <a class="code" href="luaconf_8h.html#afa035bf534f18141e29c98e3a222074c">LUA_QL</a>(<span class="stringliteral">&quot;for&quot;</span>) <span class="stringliteral">&quot; limit must be a number&quot;</span>);
<a name="l00671"></a>00671         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="lvm_8h.html#af9edcc5da8ea1ac07ffdf79fbe5bb95c">tonumber</a>(pstep, ra+2))
<a name="l00672"></a>00672           <a class="code" href="ldebug_8h.html#a09f10e9e270ceb370bfddaaace18b468">luaG_runerror_1</a>(L, <a class="code" href="luaconf_8h.html#afa035bf534f18141e29c98e3a222074c">LUA_QL</a>(<span class="stringliteral">&quot;for&quot;</span>) <span class="stringliteral">&quot; step must be a number&quot;</span>);
<a name="l00673"></a>00673         <a class="code" href="lobject_8h.html#a6e4ca2bc0025d5b310e7a78f3ac04fcc">setnvalue</a>(ra, <a class="code" href="luaconf_8h.html#a50790bab6ef62cac53cfa7e21db878f0">luai_numsub</a>(<a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(ra), <a class="code" href="lobject_8h.html#a690ab618235691bb5a82610f07dd8684">nvalue</a>(pstep)));
<a name="l00674"></a>00674         <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(i));
<a name="l00675"></a>00675         <span class="keywordflow">continue</span>;
<a name="l00676"></a>00676       }
<a name="l00677"></a>00677       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7dabccd7671c8ff374cb4502a6edb9c0">OP_TFORLOOP</a>: {
<a name="l00678"></a>00678         <a class="code" href="structlua__TValue.html">StkId</a> cb = ra + 3;  <span class="comment">/* call base */</span>
<a name="l00679"></a>00679         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, cb+2, ra+2);
<a name="l00680"></a>00680         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, cb+1, ra+1);
<a name="l00681"></a>00681         <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, cb, ra);
<a name="l00682"></a>00682         L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = cb+3;  <span class="comment">/* func. + 2 args (state and index) */</span>
<a name="l00683"></a>00683         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="ldo_8c.html#a5483fddd87ca999e7d037bf397ab7997">luaD_call</a>(L, cb, <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i)));
<a name="l00684"></a>00684         L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a>;
<a name="l00685"></a>00685         cb = <a class="code" href="lvm_8c.html#a721dd0af7e652d2d98b1f765f7860bcb">RA</a>(i) + 3;  <span class="comment">/* previous call may change the stack */</span>
<a name="l00686"></a>00686         <span class="keywordflow">if</span> (!<a class="code" href="lobject_8h.html#a8630c13eaefbeaba1aa0933cab6e0238">ttisnil</a>(cb)) {  <span class="comment">/* continue loop? */</span>
<a name="l00687"></a>00687           <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, cb-1, cb);  <span class="comment">/* save control variable */</span>
<a name="l00688"></a>00688           <a class="code" href="lvm_8c.html#af06816005bd2d79db3a47b81a15fd063">dojump</a>(L, pc, <a class="code" href="lopcodes_8h.html#a1f61a823709ac7847e481290a596c480">GETARG_sBx</a>(*pc));  <span class="comment">/* jump back */</span>
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690         pc++;
<a name="l00691"></a>00691         <span class="keywordflow">continue</span>;
<a name="l00692"></a>00692       }
<a name="l00693"></a>00693       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a01618d8295953fd4ab2ef721b2051718">OP_SETLIST</a>: {
<a name="l00694"></a>00694         <span class="keywordtype">int</span> n = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i);
<a name="l00695"></a>00695         <span class="keywordtype">int</span> c = <a class="code" href="lopcodes_8h.html#af96cb84f2685fda7f36d3d099dba6a44">GETARG_C</a>(i);
<a name="l00696"></a>00696         <span class="keywordtype">int</span> last;
<a name="l00697"></a>00697         <a class="code" href="structTable.html">Table</a> *h;
<a name="l00698"></a>00698         <span class="keywordflow">if</span> (n == 0) {
<a name="l00699"></a>00699           n = <a class="code" href="llimits_8h.html#a37a9e2c4b53433d34bad0f12a1500c08">cast_int</a>(L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> - ra) - 1;
<a name="l00700"></a>00700           L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>-&gt;<a class="code" href="structCallInfo.html#ae782b06ef00ccfe0720625ffa99b093a">top</a>;
<a name="l00701"></a>00701         }
<a name="l00702"></a>00702         <span class="keywordflow">if</span> (c == 0) c = <a class="code" href="llimits_8h.html#a37a9e2c4b53433d34bad0f12a1500c08">cast_int</a>(*pc++);
<a name="l00703"></a>00703         <a class="code" href="lvm_8c.html#ac8ac87769df235baa83b7a5c4f3aaed4">runtime_check</a>(L, <a class="code" href="lobject_8h.html#ac5338f5fe3885d1ee65412e00a44384e">ttistable</a>(ra));
<a name="l00704"></a>00704         h = <a class="code" href="lobject_8h.html#a336a6ce5e8340e6de133ec249cf47ebf">hvalue</a>(ra);
<a name="l00705"></a>00705         last = ((c-1)*<a class="code" href="lopcodes_8h.html#a0888e2bcb54f6e603f09208763aadfe9">LFIELDS_PER_FLUSH</a>) + n;
<a name="l00706"></a>00706         <span class="keywordflow">if</span> (last &gt; h-&gt;<a class="code" href="structTable.html#a2c648e99fcf88c4660c97e7d9408b50f">sizearray</a>)  <span class="comment">/* needs more space? */</span>
<a name="l00707"></a>00707           <a class="code" href="ltable_8c.html#a61df2bbe210f693788570ccf6bc745b5">luaH_resizearray</a>(L, h, last);  <span class="comment">/* pre-alloc it at once */</span>
<a name="l00708"></a>00708         <span class="keywordflow">for</span> (; n &gt; 0; n--) {
<a name="l00709"></a>00709           <a class="code" href="structlua__TValue.html">TValue</a> *val = ra+n;
<a name="l00710"></a>00710           <a class="code" href="lobject_8h.html#adefdd17d98f1f5734ee296395e1805d4">setobj2t</a>(L, <a class="code" href="ltable_8c.html#a9fddc8c65f349970bbbbbfc79ed4bc24">luaH_setnum</a>(L, h, last--), val);
<a name="l00711"></a>00711           <a class="code" href="lgc_8h.html#af06a36c96d2a39e8f60b653671b02ef6">luaC_barriert</a>(L, h, val);
<a name="l00712"></a>00712         }
<a name="l00713"></a>00713         <span class="keywordflow">continue</span>;
<a name="l00714"></a>00714       }
<a name="l00715"></a>00715       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9e771dc35104ec1246adba881d27e372">OP_CLOSE</a>: {
<a name="l00716"></a>00716         <a class="code" href="lfunc_8c.html#ab50c76a12250379a898290f481de4ab6">luaF_close</a>(L, ra);
<a name="l00717"></a>00717         <span class="keywordflow">continue</span>;
<a name="l00718"></a>00718       }
<a name="l00719"></a>00719       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a407a76cd8c503b0f4dc14603687a77a2">OP_CLOSURE</a>: {
<a name="l00720"></a>00720         <a class="code" href="structProto.html">Proto</a> *p;
<a name="l00721"></a>00721         <a class="code" href="unionClosure.html">Closure</a> *ncl;
<a name="l00722"></a>00722         <span class="keywordtype">int</span> nup, j;
<a name="l00723"></a>00723         p = cl-&gt;<a class="code" href="structLClosure.html#a4cf173817d3897b0e70822e70d241d6c">p</a>-&gt;<a class="code" href="structProto.html#a54dc8e2e8973007794fa0ab0e4a71461">p</a>[<a class="code" href="lopcodes_8h.html#acf8d228275fd2789dcf5f019bbabc019">GETARG_Bx</a>(i)];
<a name="l00724"></a>00724         nup = p-&gt;<a class="code" href="structProto.html#ae20e9996154a89085ac03eaaf8f23d32">nups</a>;
<a name="l00725"></a>00725         ncl = <a class="code" href="lfunc_8c.html#a2d952a66a41f5dcfa2d22395835c5b8d">luaF_newLclosure</a>(L, nup, cl-&gt;env);
<a name="l00726"></a>00726         ncl-&gt;<a class="code" href="unionClosure.html#a8c338ec7dc76078cbee5887857de713c">l</a>.<a class="code" href="structLClosure.html#a4cf173817d3897b0e70822e70d241d6c">p</a> = p;
<a name="l00727"></a>00727         <span class="keywordflow">for</span> (j=0; j&lt;nup; j++, pc++) {
<a name="l00728"></a>00728           <span class="keywordflow">if</span> (<a class="code" href="lopcodes_8h.html#aaa146179c3677b790c5681dcd82f0acc">GET_OPCODE</a>(*pc) == <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab48573533495922f053a7d1c9b0d00b4">OP_GETUPVAL</a>)
<a name="l00729"></a>00729             ncl-&gt;<a class="code" href="unionClosure.html#a8c338ec7dc76078cbee5887857de713c">l</a>.<a class="code" href="structLClosure.html#a94886e7c7df838f5fab36575b0554682">upvals</a>[j] = cl-&gt;<a class="code" href="structLClosure.html#a94886e7c7df838f5fab36575b0554682">upvals</a>[<a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(*pc)];
<a name="l00730"></a>00730           <span class="keywordflow">else</span> {
<a name="l00731"></a>00731             <a class="code" href="llimits_8h.html#a5978f5fda715bd80e845df1e16ad7780">lua_assert</a>(<a class="code" href="lopcodes_8h.html#aaa146179c3677b790c5681dcd82f0acc">GET_OPCODE</a>(*pc) == <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7addf83bbc02b6a88d325135c880d12184">OP_MOVE</a>);
<a name="l00732"></a>00732             ncl-&gt;<a class="code" href="unionClosure.html#a8c338ec7dc76078cbee5887857de713c">l</a>.<a class="code" href="structLClosure.html#a94886e7c7df838f5fab36575b0554682">upvals</a>[j] = <a class="code" href="lfunc_8c.html#a20f971bc630264489ebc4deea02be13a">luaF_findupval</a>(L, base + <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(*pc));
<a name="l00733"></a>00733           }
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735         <a class="code" href="lobject_8h.html#a766f0e76b0607550fd72164373ba544d">setclvalue</a>(L, ra, ncl);
<a name="l00736"></a>00736         <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="lgc_8h.html#ad013db5004ccc5fbe8a6450caa1f1ad9">luaC_checkGC</a>(L));
<a name="l00737"></a>00737         <span class="keywordflow">continue</span>;
<a name="l00738"></a>00738       }
<a name="l00739"></a>00739       <span class="keywordflow">case</span> <a class="code" href="lopcodes_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1856103c50818d72aaa506821a4ef004">OP_VARARG</a>: {
<a name="l00740"></a>00740         <span class="keywordtype">int</span> b = <a class="code" href="lopcodes_8h.html#a7a343159ef7669a438c2097b839b2b13">GETARG_B</a>(i) - 1;
<a name="l00741"></a>00741         <span class="keywordtype">int</span> j;
<a name="l00742"></a>00742         <a class="code" href="structCallInfo.html">CallInfo</a> *ci = L-&gt;<a class="code" href="structlua__State.html#a7fbb5727050853f411ad64b4be9ab5c8">ci</a>;
<a name="l00743"></a>00743         <span class="keywordtype">int</span> n = <a class="code" href="llimits_8h.html#a37a9e2c4b53433d34bad0f12a1500c08">cast_int</a>(ci-&gt;<a class="code" href="structCallInfo.html#a7b8303ad59b7ba200cd5e3a26b118fbf">base</a> - ci-&gt;<a class="code" href="structCallInfo.html#a378cfb37136fabfe59d1c38071c6c9d1">func</a>) - cl-&gt;<a class="code" href="structLClosure.html#a4cf173817d3897b0e70822e70d241d6c">p</a>-&gt;<a class="code" href="structProto.html#a3f106f177af6c68ffd8b042713266b98">numparams</a> - 1;
<a name="l00744"></a>00744         <span class="keywordflow">if</span> (b == <a class="code" href="lua_8h.html#ace3545adc11664c2f2b152fbe8b6283c">LUA_MULTRET</a>) {
<a name="l00745"></a>00745           <a class="code" href="lvm_8c.html#ae2228ab29e99d983653ab7b51e4b1f9c">Protect</a>(<a class="code" href="ldo_8h.html#ab1500a6449b9cdf335e3c7ce23aa85d7">luaD_checkstack</a>(L, n));
<a name="l00746"></a>00746           ra = <a class="code" href="lvm_8c.html#a721dd0af7e652d2d98b1f765f7860bcb">RA</a>(i);  <span class="comment">/* previous call may change the stack */</span>
<a name="l00747"></a>00747           b = n;
<a name="l00748"></a>00748           L-&gt;<a class="code" href="structlua__State.html#a195f448e76fd404953fa1962d28212a3">top</a> = ra + n;
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750         <span class="keywordflow">for</span> (j = 0; j &lt; b; j++) {
<a name="l00751"></a>00751           <span class="keywordflow">if</span> (j &lt; n) {
<a name="l00752"></a>00752             <a class="code" href="lobject_8h.html#a6d30d7fa36e78e0bfb56ba38d9e89ce2">setobjs2s</a>(L, ra + j, ci-&gt;<a class="code" href="structCallInfo.html#a7b8303ad59b7ba200cd5e3a26b118fbf">base</a> - n + j);
<a name="l00753"></a>00753           }
<a name="l00754"></a>00754           <span class="keywordflow">else</span> {
<a name="l00755"></a>00755             <a class="code" href="lobject_8h.html#ad9034def7bbc1965ec3d714d84620b07">setnilvalue</a>(ra + j);
<a name="l00756"></a>00756           }
<a name="l00757"></a>00757         }
<a name="l00758"></a>00758         <span class="keywordflow">continue</span>;
<a name="l00759"></a>00759       }
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761   }
<a name="l00762"></a>00762 }
<a name="l00763"></a>00763 
</pre></div></div>
<hr size="1">

<p style="text-align: right;">
  <a href="http://www.contextlogger.org/">ContextLogger2</a>&#8212;ContextLogger2 Logger Daemon Internals&#8212;<small>Generated on Mon May 2 13:49:55 2011 by&nbsp;<a href="http://www.doxygen.org/">Doxygen</a> 1.6.1</small>
</p>

</body>
</html>
